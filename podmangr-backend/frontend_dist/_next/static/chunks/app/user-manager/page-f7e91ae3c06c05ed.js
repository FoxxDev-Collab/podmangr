(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7738],{3394:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var a=t(5155),r=t(2115),l=t(63),n=t(6707),d=t(5781),c=t(3209),i=t(7003),o=t(6633),u=t(1169),h=t(9559),x=t(7812);function m(){let{isAuthenticated:e,isLoading:s,token:t,user:m}=(0,n.A)(),j=(0,l.useRouter)(),[f,b]=(0,r.useState)([]),[p,N]=(0,r.useState)(!0),[v,g]=(0,r.useState)(null),w=(null==m?void 0:m.role)==="admin",y=(0,r.useCallback)(async()=>{if(t){N(!0);try{let e=await fetch("/api/users",{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let s=await e.json();b(s||[]),g(null)}else g("Failed to load users")}catch(e){g(e instanceof Error?e.message:"Failed to load users")}finally{N(!1)}}},[t]);return((0,r.useEffect)(()=>{s||e?s||(null==m?void 0:m.role)==="admin"||j.push("/container-manager"):j.push("/login")},[e,s,m,j]),(0,r.useEffect)(()=>{t&&w&&y()},[t,w,y]),!s&&e&&w)?(0,a.jsx)(d.N,{title:"User Manager",children:(0,a.jsx)("div",{className:"p-6 space-y-6",children:(0,a.jsxs)(c.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,a.jsx)(c.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(c.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-accent"}),"System Users"]}),(0,a.jsxs)(i.$,{onClick:y,size:"sm",variant:"outline",children:[(0,a.jsx)(h.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),(0,a.jsxs)(c.Wu,{children:[v&&(0,a.jsx)("div",{className:"text-destructive text-sm mb-4",children:v}),p?(0,a.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"Loading users..."}):(0,a.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,a.jsxs)(o.XI,{children:[(0,a.jsx)(o.A0,{children:(0,a.jsxs)(o.Hj,{children:[(0,a.jsx)(o.nd,{children:"ID"}),(0,a.jsx)(o.nd,{children:"Username"}),(0,a.jsx)(o.nd,{children:"Display Name"}),(0,a.jsx)(o.nd,{children:"Role"}),(0,a.jsx)(o.nd,{children:"Type"}),(0,a.jsx)(o.nd,{children:"Created"})]})}),(0,a.jsx)(o.BF,{children:f.map(e=>(0,a.jsxs)(o.Hj,{children:[(0,a.jsx)(o.nA,{className:"font-mono",children:e.id}),(0,a.jsx)(o.nA,{className:"font-medium",children:e.username}),(0,a.jsx)(o.nA,{children:e.display_name}),(0,a.jsx)(o.nA,{children:(0,a.jsx)(x.E,{variant:"admin"===e.role?"default":"operator"===e.role?"secondary":"outline",children:e.role})}),(0,a.jsx)(o.nA,{children:e.is_pam_user?(0,a.jsx)(x.E,{variant:"outline",children:"PAM"}):(0,a.jsx)(x.E,{variant:"outline",children:"Local"})}),(0,a.jsx)(o.nA,{className:"text-sm text-muted-foreground",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})}),!p&&0===f.length&&(0,a.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No users found"})]})]})})}):null}},3492:(e,s,t)=>{Promise.resolve().then(t.bind(t,3394))},6633:(e,s,t)=>{"use strict";t.d(s,{A0:()=>n,BF:()=>d,Hj:()=>c,XI:()=>l,nA:()=>o,nd:()=>i});var a=t(5155);t(2115);var r=t(5016);function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,a.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",s),...t})})}function n(e){let{className:s,...t}=e;return(0,a.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}function o(e){let{className:s,...t}=e;return(0,a.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...t})}}},e=>{e.O(0,[4095,6189,2940,9837,8441,1255,7358],()=>e(e.s=3492)),_N_E=e.O()}]);