(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4502],{4249:(e,t,r)=>{"use strict";r.d(t,{C1:()=>N,bL:()=>b});var s=r(2115),a=r(5155),n=r(7602),l="Progress",[o,i]=function(e,t=[]){let r=[],n=()=>{let t=r.map(e=>s.createContext(e));return function(r){let a=r?.[e]||t;return s.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return n.scopeName=e,[function(t,n){let l=s.createContext(n);l.displayName=t+"Context";let o=r.length;r=[...r,n];let i=t=>{let{scope:r,children:n,...i}=t,c=r?.[e]?.[o]||l,d=s.useMemo(()=>i,Object.values(i));return(0,a.jsx)(c.Provider,{value:d,children:n})};return i.displayName=t+"Provider",[i,function(r,a){let i=a?.[e]?.[o]||l,c=s.useContext(i);if(c)return c;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:s})=>{let a=r(e)[`__scope${s}`];return{...t,...a}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(n,...t)]}(l),[c,d]=o(l),u=s.forwardRef((e,t)=>{var r,s,l,o;let{__scopeProgress:i,value:d=null,max:u,getValueLabel:m=h,...x}=e;(u||0===u)&&!j(u)&&console.error((r="".concat(u),s="Progress","Invalid prop `max` of value `".concat(r,"` supplied to `").concat(s,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let b=j(u)?u:100;null===d||v(d,b)||console.error((l="".concat(d),o="Progress","Invalid prop `value` of value `".concat(l,"` supplied to `").concat(o,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let N=v(d,b)?d:null,g=p(N)?m(N,b):void 0;return(0,a.jsx)(c,{scope:i,value:N,max:b,children:(0,a.jsx)(n.sG.div,{"aria-valuemax":b,"aria-valuemin":0,"aria-valuenow":p(N)?N:void 0,"aria-valuetext":g,role:"progressbar","data-state":f(N,b),"data-value":null!=N?N:void 0,"data-max":b,...x,ref:t})})});u.displayName=l;var m="ProgressIndicator",x=s.forwardRef((e,t)=>{var r;let{__scopeProgress:s,...l}=e,o=d(m,s);return(0,a.jsx)(n.sG.div,{"data-state":f(o.value,o.max),"data-value":null!=(r=o.value)?r:void 0,"data-max":o.max,...l,ref:t})});function h(e,t){return"".concat(Math.round(e/t*100),"%")}function f(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function p(e){return"number"==typeof e}function j(e){return p(e)&&!isNaN(e)&&e>0}function v(e,t){return p(e)&&!isNaN(e)&&e<=t&&e>=0}x.displayName=m;var b=u,N=x},5850:(e,t,r)=>{"use strict";r.d(t,{k:()=>l});var s=r(5155);r(2115);var a=r(4249),n=r(5016);function l(e){let{className:t,value:r,...l}=e;return(0,s.jsx)(a.bL,{"data-slot":"progress",className:(0,n.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",t),...l,children:(0,s.jsx)(a.C1,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})}},6432:(e,t,r)=>{Promise.resolve().then(r.bind(r,7402))},6633:(e,t,r)=>{"use strict";r.d(t,{A0:()=>l,BF:()=>o,Hj:()=>i,XI:()=>n,nA:()=>d,nd:()=>c});var s=r(5155);r(2115);var a=r(5016);function n(e){let{className:t,...r}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",t),...r})})}function l(e){let{className:t,...r}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",t),...r})}function o(e){let{className:t,...r}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",t),...r})}function i(e){let{className:t,...r}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...r})}function c(e){let{className:t,...r}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}function d(e){let{className:t,...r}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r})}},7402:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(5155),a=r(2115),n=r(63),l=r(6707),o=r(5781),i=r(3209),c=r(7003),d=r(6633),u=r(523),m=r(9559),x=r(5850);function h(){let{isAuthenticated:e,isLoading:t,token:r}=(0,l.A)(),h=(0,n.useRouter)(),[f,p]=(0,a.useState)([]),[j,v]=(0,a.useState)([]),[b,N]=(0,a.useState)(!0),[g,w]=(0,a.useState)(null),y=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["B","KB","MB","GB","TB"][t]},A=(0,a.useCallback)(async()=>{if(r){N(!0);try{let[e,t]=await Promise.all([fetch("/api/storage/disks",{headers:{Authorization:"Bearer ".concat(r)}}),fetch("/api/storage/mounts",{headers:{Authorization:"Bearer ".concat(r)}})]);e.ok&&t.ok?(p(await e.json()||[]),v(await t.json()||[]),w(null)):w("Failed to load storage information")}catch(e){w(e instanceof Error?e.message:"Failed to load storage")}finally{N(!1)}}},[r]);return((0,a.useEffect)(()=>{t||e||h.push("/login")},[e,t,h]),(0,a.useEffect)(()=>{r&&A()},[r,A]),t||!e)?null:(0,s.jsx)(o.N,{title:"Storage Manager",children:(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)(i.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-5 w-5 text-accent"}),"Physical Disks"]}),(0,s.jsxs)(c.$,{onClick:A,size:"sm",variant:"outline",children:[(0,s.jsx)(m.A,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})}),(0,s.jsxs)(i.Wu,{children:[g&&(0,s.jsx)("div",{className:"text-destructive text-sm mb-4",children:g}),b?(0,s.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"Loading disks..."}):(0,s.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,s.jsxs)(d.XI,{children:[(0,s.jsx)(d.A0,{children:(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nd,{children:"Device"}),(0,s.jsx)(d.nd,{children:"Model"}),(0,s.jsx)(d.nd,{children:"Type"}),(0,s.jsx)(d.nd,{children:"Size"})]})}),(0,s.jsx)(d.BF,{children:f.map(e=>(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nA,{className:"font-mono",children:e.name}),(0,s.jsx)(d.nA,{children:e.model||"N/A"}),(0,s.jsx)(d.nA,{children:e.type}),(0,s.jsx)(d.nA,{children:y(e.size)})]},e.name))})]})}),!b&&0===f.length&&(0,s.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No disks found"})]})]}),(0,s.jsxs)(i.Zp,{className:"border-border/60 bg-card/70 backdrop-blur-sm",children:[(0,s.jsx)(i.aR,{children:(0,s.jsxs)(i.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(u.A,{className:"h-5 w-5 text-accent"}),"Mounted Filesystems"]})}),(0,s.jsxs)(i.Wu,{children:[b?(0,s.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"Loading mounts..."}):(0,s.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,s.jsxs)(d.XI,{children:[(0,s.jsx)(d.A0,{children:(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nd,{children:"Device"}),(0,s.jsx)(d.nd,{children:"Mount Point"}),(0,s.jsx)(d.nd,{children:"Type"}),(0,s.jsx)(d.nd,{children:"Size"}),(0,s.jsx)(d.nd,{children:"Used"}),(0,s.jsx)(d.nd,{children:"Available"}),(0,s.jsx)(d.nd,{children:"Usage"})]})}),(0,s.jsx)(d.BF,{children:j.map((e,t)=>(0,s.jsxs)(d.Hj,{children:[(0,s.jsx)(d.nA,{className:"font-mono text-sm",children:e.device}),(0,s.jsx)(d.nA,{className:"font-medium",children:e.mountpoint}),(0,s.jsx)(d.nA,{className:"text-sm",children:e.fstype}),(0,s.jsx)(d.nA,{children:y(e.size)}),(0,s.jsx)(d.nA,{children:y(e.used)}),(0,s.jsx)(d.nA,{children:y(e.available)}),(0,s.jsx)(d.nA,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.k,{value:e.use_percent,className:"w-20"}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.use_percent,"%"]})]})})]},t))})]})}),!b&&0===j.length&&(0,s.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No mounts found"})]})]})]})})}},7602:(e,t,r)=>{"use strict";r.d(t,{sG:()=>l});var s=r(2115);r(7650);var a=r(2467),n=r(5155),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,a.TL)(`Primitive.${t}`),l=s.forwardRef((e,s)=>{let{asChild:a,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(a?r:t,{...l,ref:s})});return l.displayName=`Primitive.${t}`,{...e,[t]:l}},{})}},e=>{e.O(0,[4095,6189,2940,9837,8441,1255,7358],()=>e(e.s=6432)),_N_E=e.O()}]);