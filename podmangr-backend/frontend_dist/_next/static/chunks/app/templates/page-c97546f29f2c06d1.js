(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3814],{235:(e,s,a)=>{"use strict";a.d(s,{J:()=>l});var t=a(5155);a(2115);var r=a(489),n=a(5016);function l(e){let{className:s,...a}=e;return(0,t.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...a})}},908:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},1010:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},1370:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>D});var t=a(5155),r=a(2115),n=a(63),l=a(6707),c=a(5781),i=a(3209),o=a(7003),d=a(6170),m=a(235),p=a(7812),x=a(5016);let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,x.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 resize-y",a),ref:s,...r})});h.displayName="Textarea";var u=a(7346),g=a(4679),j=a(5299),f=a(7666),v=a(5757),N=a(2987),b=a(9867),y=a(6651),w=a(1786),k=a(6191),C=a(1847);let A=(0,C.A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var S=a(508),E=a(6140);let T=(0,C.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),J=(0,C.A)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var O=a(1010),z=a(5426),F=a(1360),_=a(908),R=a(1362),M=a(3327),L=a(4452),U=a(8720);function $(e){let{token:s,isAdmin:a}=e,[n,l]=(0,r.useState)([]),[c,x]=(0,r.useState)(!0),[C,$]=(0,r.useState)(""),[D,V]=(0,r.useState)(null),[P,B]=(0,r.useState)(!1),[I,q]=(0,r.useState)(!1),[G,W]=(0,r.useState)(!1),[Y,Z]=(0,r.useState)(!1),[K,H]=(0,r.useState)(!1),[Q,X]=(0,r.useState)(!1),[ee,es]=(0,r.useState)(""),[ea,et]=(0,r.useState)(""),[er,en]=(0,r.useState)("1.0.0"),[el,ec]=(0,r.useState)('version: "3.8"\nservices:\n  app:\n    image: nginx:alpine\n    ports:\n      - "8080:80"\n    restart: unless-stopped\n'),[ei,eo]=(0,r.useState)(""),[ed,em]=(0,r.useState)(""),[ep,ex]=(0,r.useState)(""),[eh,eu]=(0,r.useState)({}),[eg,ej]=(0,r.useState)(!1),[ef,ev]=(0,r.useState)(""),eN=(0,r.useCallback)(async()=>{try{let e=await fetch("/api/templates",{headers:{Authorization:"Bearer ".concat(s)}});if(e.ok){let s=await e.json();l(s||[])}}catch(e){console.error("Failed to fetch templates:",e)}finally{x(!1)}},[s]);(0,r.useEffect)(()=>{eN()},[eN]);let eb=()=>{es(""),et(""),en("1.0.0"),ec('version: "3.8"\nservices:\n  app:\n    image: nginx:alpine\n    ports:\n      - "8080:80"\n    restart: unless-stopped\n'),eo(""),em("")},ey=e=>{let s={};return e.split("\n").forEach(e=>{let a=e.trim();if(a&&!a.startsWith("#")){let[e,...t]=a.split("=");e&&(s[e.trim()]=t.join("=").trim())}}),s},ew=e=>e.split(",").map(e=>e.trim()).filter(e=>e.length>0),ek=async()=>{if(!ee||!el)return void U.oR.error("Validation Error",{description:"Name and compose content are required"});try{let e=await fetch("/api/templates",{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({name:ee,description:ea,version:er,compose_content:el,env_defaults:ey(ei),tags:ew(ed)})});if(e.ok)U.oR.success("Template Created",{description:'Template "'.concat(ee,'" created successfully')}),B(!1),eb(),eN();else{let s=await e.json();U.oR.error("Failed to create template",{description:s.error||"Unknown error"})}}catch(e){U.oR.error("Failed to create template",{description:e instanceof Error?e.message:"Unknown error"})}},eC=async()=>{if(D)try{let e=await fetch("/api/templates/".concat(D.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({name:ee||D.name,description:ea,version:er,compose_content:el,env_defaults:ey(ei),tags:ew(ed)})});if(e.ok)U.oR.success("Template Updated",{description:'Template "'.concat(D.name,'" updated successfully')}),q(!1),eN();else{let s=await e.json();U.oR.error("Failed to update template",{description:s.error||"Unknown error"})}}catch(e){U.oR.error("Failed to update template",{description:e instanceof Error?e.message:"Unknown error"})}},eA=async()=>{if(D)try{let e=await fetch("/api/templates/".concat(D.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(s)}});if(e.ok)U.oR.success("Template Deleted",{description:'Template "'.concat(D.name,'" deleted successfully')}),W(!1),V(null),eN();else{let s=await e.json();U.oR.error("Failed to delete template",{description:s.error||"Unknown error"})}}catch(e){U.oR.error("Failed to delete template",{description:e instanceof Error?e.message:"Unknown error"})}},eS=async()=>{if(D){ej(!0);try{let e=await fetch("/api/templates/".concat(D.id,"/deploy"),{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({project_name:ep,environment:eh})}),a=await e.json();e.ok?(U.oR.success("Stack Created from Template",{description:'Stack "'.concat(ep||D.name,'" created. Go to Stacks tab to deploy it.')}),Z(!1),ex(""),eu({})):U.oR.error("Failed to deploy template",{description:a.error||"Unknown error"})}catch(e){U.oR.error("Failed to deploy template",{description:e instanceof Error?e.message:"Unknown error"})}finally{ej(!1)}}},eE=async e=>{try{let a=await fetch("/api/templates/".concat(e.id,"/export"),{headers:{Authorization:"Bearer ".concat(s)}});if(a.ok){let s=await a.json(),t=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.download="".concat(e.name,".json"),n.click(),URL.revokeObjectURL(r),U.oR.success("Template Exported",{description:'Template "'.concat(e.name,'" exported successfully')})}else U.oR.error("Failed to export template")}catch(e){U.oR.error("Failed to export template",{description:e instanceof Error?e.message:"Unknown error"})}},eT=async e=>{try{let a=await fetch("/api/templates/".concat(e.id,"/export"),{headers:{Authorization:"Bearer ".concat(s)}});if(a.ok){let e=await a.json();await navigator.clipboard.writeText(JSON.stringify(e,null,2)),U.oR.success("Copied to Clipboard",{description:"Template JSON copied to clipboard"})}}catch(e){U.oR.error("Failed to copy template",{description:e instanceof Error?e.message:"Unknown error"})}},eJ=async()=>{let e;if(!ef.trim())return void U.oR.error("Validation Error",{description:"Please paste template JSON"});try{e=JSON.parse(ef)}catch(e){U.oR.error("Invalid JSON",{description:"Please check the JSON format"});return}try{let a=await fetch("/api/templates/import",{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:ef});if(a.ok)U.oR.success("Template Imported",{description:'Template "'.concat(e.name,'" imported successfully')}),H(!1),ev(""),eN();else{let e=await a.json();U.oR.error("Failed to import template",{description:e.error||"Unknown error"})}}catch(e){U.oR.error("Failed to import template",{description:e instanceof Error?e.message:"Unknown error"})}},eO=e=>{if(V(e),es(e.name),et(e.description),en(e.version),ec(e.compose_content),e.env_defaults)try{let s=JSON.parse(e.env_defaults);eo(Object.entries(s).map(e=>{let[s,a]=e;return"".concat(s,"=").concat(a)}).join("\n"))}catch(e){eo("")}else eo("");if(e.tags)try{let s=JSON.parse(e.tags);em(s.join(", "))}catch(e){em("")}else em("");q(!0)},ez=e=>{if(V(e),ex(""),e.env_defaults)try{let s=JSON.parse(e.env_defaults);eu(s)}catch(e){eu({})}else eu({});Z(!0)},eF=n.filter(e=>{let s=C.toLowerCase();return e.name.toLowerCase().includes(s)||e.description.toLowerCase().includes(s)||e.author.toLowerCase().includes(s)}),e_=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),eR=e=>{if(!e)return[];try{return JSON.parse(e)}catch(e){return[]}};return c?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(j.A,{className:"w-8 h-8 animate-spin text-accent"})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(i.Zp,{className:"border-cyan-500/30 bg-cyan-500/5",children:(0,t.jsx)(i.Wu,{className:"py-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-cyan-500/10",children:(0,t.jsx)(f.A,{className:"w-5 h-5 text-cyan-400"})}),(0,t.jsxs)("div",{className:"space-y-1 flex-1",children:[(0,t.jsx)("h3",{className:"font-medium text-sm flex items-center gap-2",children:"What are Templates?"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Templates are reusable blueprints for container deployments. Create a template once, deploy it multiple times as different stacks. Templates can be exported as JSON files and shared with others."}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 pt-2 text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(v.A,{className:"w-3 h-3 text-cyan-400"}),"Define compose configurations"]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(N.A,{className:"w-3 h-3 text-cyan-400"}),"Deploy to create stacks"]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(b.A,{className:"w-3 h-3 text-cyan-400"}),"Export & share as JSON"]})]})]})]})})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-between",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(y.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),(0,t.jsx)(d.p,{placeholder:"Search templates...",value:C,onChange:e=>$(e.target.value),className:"pl-10 bg-card/70 border-border/50"})]}),a&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(o.$,{variant:"outline",onClick:()=>H(!0),className:"gap-2",children:[(0,t.jsx)(w.A,{className:"w-4 h-4"})," Import"]}),(0,t.jsxs)(o.$,{onClick:()=>{eb(),B(!0)},className:"gap-2",children:[(0,t.jsx)(k.A,{className:"w-4 h-4"})," New Template"]})]})]}),0===eF.length?(0,t.jsx)(i.Zp,{className:"border-border/50 bg-card/70",children:(0,t.jsxs)(i.Wu,{className:"flex flex-col items-center justify-center py-16",children:[(0,t.jsx)(v.A,{className:"w-16 h-16 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No Templates"}),(0,t.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:C?"No templates match your search":"Save your container configurations as reusable templates"}),a&&!C&&(0,t.jsxs)(o.$,{onClick:()=>{eb(),B(!0)},className:"gap-2",children:[(0,t.jsx)(k.A,{className:"w-4 h-4"})," Create First Template"]})]})}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:eF.map(e=>(0,t.jsxs)(i.Zp,{className:"border-border/50 bg-card/70 hover:bg-card/90 transition-colors cursor-pointer",onClick:()=>{V(e),X(!0)},children:[(0,t.jsx)(i.aR,{className:"pb-2",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(v.A,{className:"w-5 h-5 text-cyan-400"}),(0,t.jsx)(i.ZB,{className:"text-base font-medium",children:e.name})]}),(0,t.jsxs)(p.E,{variant:"outline",className:"text-xs",children:["v",e.version||"1.0"]})]})}),(0,t.jsxs)(i.Wu,{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description||"No description"}),eR(e.tags).length>0&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[eR(e.tags).slice(0,3).map(e=>(0,t.jsxs)(p.E,{variant:"secondary",className:"text-xs",children:[(0,t.jsx)(A,{className:"w-3 h-3 mr-1"}),e]},e)),eR(e.tags).length>3&&(0,t.jsxs)(p.E,{variant:"secondary",className:"text-xs",children:["+",eR(e.tags).length-3]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground pt-2 border-t border-border/50",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(S.A,{className:"w-3 h-3"}),e.author]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(E.A,{className:"w-3 h-3"}),e.usage_count," deploys"]})]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(T,{className:"w-3 h-3"}),e_(e.created_at)]})]}),(0,t.jsxs)("div",{className:"flex gap-2 pt-2",onClick:e=>e.stopPropagation(),children:[a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>ez(e),className:"flex-1 gap-1",children:[(0,t.jsx)(J,{className:"w-3 h-3"})," Deploy"]}),(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>eO(e),children:(0,t.jsx)(O.A,{className:"w-3 h-3"})}),(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>eE(e),children:(0,t.jsx)(b.A,{className:"w-3 h-3"})}),(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>eT(e),children:(0,t.jsx)(z.A,{className:"w-3 h-3"})}),(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>{V(e),W(!0)},className:"text-destructive hover:text-destructive",children:(0,t.jsx)(F.A,{className:"w-3 h-3"})})]}),!a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.$,{variant:"outline",size:"sm",onClick:()=>eE(e),className:"gap-1",children:[(0,t.jsx)(b.A,{className:"w-3 h-3"})," Export"]}),(0,t.jsx)(o.$,{variant:"ghost",size:"sm",onClick:()=>eT(e),children:(0,t.jsx)(z.A,{className:"w-3 h-3"})})]})]})]})]},e.id))}),(0,t.jsx)(g.lG,{open:P,onOpenChange:B,children:(0,t.jsxs)(g.Cf,{className:"max-w-2xl max-h-[90vh]",children:[(0,t.jsxs)(g.c7,{children:[(0,t.jsxs)(g.L3,{className:"flex items-center gap-2",children:[(0,t.jsx)(v.A,{className:"w-5 h-5 text-cyan-400"}),"Create Template"]}),(0,t.jsx)(g.rr,{children:"Define a reusable blueprint that can be deployed as multiple stacks"})]}),(0,t.jsx)(u.F,{className:"max-h-[60vh]",children:(0,t.jsxs)("div",{className:"space-y-4 p-1",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-muted/50 border border-border/50",children:[(0,t.jsx)(_.A,{className:"w-4 h-4 text-muted-foreground mt-0.5 shrink-0"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Templates store compose configurations with default environment variables. When deployed, a new stack is created that can be started, stopped, and managed independently."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"name",children:"Name *"}),(0,t.jsx)(d.p,{id:"name",value:ee,onChange:e=>es(e.target.value),placeholder:"my-app-template",className:"bg-background/50"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Unique identifier for this template"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"version",children:"Version"}),(0,t.jsx)(d.p,{id:"version",value:er,onChange:e=>en(e.target.value),placeholder:"1.0.0",className:"bg-background/50"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Semantic version (e.g., 1.0.0)"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"description",children:"Description"}),(0,t.jsx)(h,{id:"description",value:ea,onChange:e=>et(e.target.value),placeholder:"Describe what this template does...",rows:2,className:"bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"compose",children:"Docker Compose Content *"}),(0,t.jsx)(h,{id:"compose",value:el,onChange:e=>ec(e.target.value),placeholder:"version: '3.8'\\nservices:\\n  ...",rows:12,className:"font-mono text-sm bg-background/50"}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Standard docker-compose.yml format. Use environment variable placeholders like ",(0,t.jsxs)("code",{className:"px-1 py-0.5 bg-muted rounded",children:["$","${VAR_NAME}"]})," for customizable values."]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"env",children:"Default Environment Variables"}),(0,t.jsx)(h,{id:"env",value:ei,onChange:e=>eo(e.target.value),placeholder:"DATABASE_URL=postgres://localhost/db API_KEY=",rows:4,className:"font-mono text-sm bg-background/50"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"KEY=value format, one per line. These become editable defaults when deploying."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"tags",children:"Tags"}),(0,t.jsx)(d.p,{id:"tags",value:ed,onChange:e=>em(e.target.value),placeholder:"web, database, monitoring",className:"bg-background/50"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Comma-separated tags for filtering and categorization"})]})]})}),(0,t.jsxs)(g.Es,{children:[(0,t.jsx)(o.$,{variant:"outline",onClick:()=>B(!1),children:"Cancel"}),(0,t.jsxs)(o.$,{onClick:ek,className:"gap-2",children:[(0,t.jsx)(R.A,{className:"w-4 h-4"})," Create Template"]})]})]})}),(0,t.jsx)(g.lG,{open:I,onOpenChange:q,children:(0,t.jsxs)(g.Cf,{className:"max-w-2xl max-h-[90vh]",children:[(0,t.jsxs)(g.c7,{children:[(0,t.jsxs)(g.L3,{className:"flex items-center gap-2",children:[(0,t.jsx)(O.A,{className:"w-5 h-5 text-cyan-400"}),"Edit Template"]}),(0,t.jsx)(g.rr,{children:"Update template configuration"})]}),(0,t.jsx)(u.F,{className:"max-h-[60vh]",children:(0,t.jsxs)("div",{className:"space-y-4 p-1",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"edit-name",children:"Name"}),(0,t.jsx)(d.p,{id:"edit-name",value:ee,onChange:e=>es(e.target.value),className:"bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"edit-version",children:"Version"}),(0,t.jsx)(d.p,{id:"edit-version",value:er,onChange:e=>en(e.target.value),className:"bg-background/50"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"edit-description",children:"Description"}),(0,t.jsx)(h,{id:"edit-description",value:ea,onChange:e=>et(e.target.value),rows:2,className:"bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"edit-compose",children:"Docker Compose Content"}),(0,t.jsx)(h,{id:"edit-compose",value:el,onChange:e=>ec(e.target.value),rows:12,className:"font-mono text-sm bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"edit-env",children:"Environment Variables"}),(0,t.jsx)(h,{id:"edit-env",value:ei,onChange:e=>eo(e.target.value),rows:4,className:"font-mono text-sm bg-background/50"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"edit-tags",children:"Tags"}),(0,t.jsx)(d.p,{id:"edit-tags",value:ed,onChange:e=>em(e.target.value),className:"bg-background/50"})]})]})}),(0,t.jsxs)(g.Es,{children:[(0,t.jsx)(o.$,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),(0,t.jsxs)(o.$,{onClick:eC,className:"gap-2",children:[(0,t.jsx)(R.A,{className:"w-4 h-4"})," Save Changes"]})]})]})}),(0,t.jsx)(g.lG,{open:G,onOpenChange:W,children:(0,t.jsxs)(g.Cf,{children:[(0,t.jsxs)(g.c7,{children:[(0,t.jsxs)(g.L3,{className:"flex items-center gap-2 text-destructive",children:[(0,t.jsx)(F.A,{className:"w-5 h-5"}),"Delete Template"]}),(0,t.jsxs)(g.rr,{children:["Are you sure you want to delete ",(0,t.jsx)("strong",{children:null==D?void 0:D.name}),"? This action cannot be undone."]})]}),(0,t.jsxs)(g.Es,{children:[(0,t.jsx)(o.$,{variant:"outline",onClick:()=>W(!1),children:"Cancel"}),(0,t.jsx)(o.$,{variant:"destructive",onClick:eA,children:"Delete Template"})]})]})}),(0,t.jsx)(g.lG,{open:Y,onOpenChange:Z,children:(0,t.jsxs)(g.Cf,{className:"max-w-lg",children:[(0,t.jsxs)(g.c7,{children:[(0,t.jsxs)(g.L3,{className:"flex items-center gap-2",children:[(0,t.jsx)(J,{className:"w-5 h-5 text-cyan-400"}),"Deploy Template"]}),(0,t.jsxs)(g.rr,{children:["Create a new stack from ",(0,t.jsx)("strong",{children:null==D?void 0:D.name})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-muted/50 border border-border/50",children:[(0,t.jsx)(M.A,{className:"w-4 h-4 text-muted-foreground mt-0.5 shrink-0"}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,t.jsxs)("p",{children:["This creates a new ",(0,t.jsx)("strong",{children:"stack"})," from the template:"]}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-0.5 pl-1",children:[(0,t.jsx)("li",{children:"Stack is created with template's compose configuration"}),(0,t.jsxs)("li",{children:["Go to ",(0,t.jsx)("strong",{children:"Stacks"})," tab to deploy and manage it"]}),(0,t.jsx)("li",{children:"Each deployment is independent - changes don't affect the template"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{htmlFor:"project-name",children:"Stack Name"}),(0,t.jsx)(d.p,{id:"project-name",value:ep,onChange:e=>ex(e.target.value),placeholder:"".concat((null==D?void 0:D.name)||"project","-").concat(new Date().toISOString().slice(0,10)),className:"bg-background/50"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Leave empty to auto-generate a unique name"})]}),Object.keys(eh).length>0&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Environment Variables"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:"Customize the default values for this deployment"}),(0,t.jsx)(u.F,{className:"max-h-48",children:(0,t.jsx)("div",{className:"space-y-2",children:Object.entries(eh).map(e=>{let[s,a]=e;return(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(d.p,{value:s,disabled:!0,className:"w-1/3 bg-background/30 text-muted-foreground text-sm"}),(0,t.jsx)(d.p,{value:a,onChange:e=>eu(a=>({...a,[s]:e.target.value})),placeholder:"value",className:"bg-background/50 text-sm"})]},s)})})})]})]}),(0,t.jsxs)(g.Es,{children:[(0,t.jsx)(o.$,{variant:"outline",onClick:()=>Z(!1),children:"Cancel"}),(0,t.jsxs)(o.$,{onClick:eS,disabled:eg,className:"gap-2",children:[eg?(0,t.jsx)(j.A,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(J,{className:"w-4 h-4"}),eg?"Creating...":"Create Stack"]})]})]})}),(0,t.jsx)(g.lG,{open:K,onOpenChange:H,children:(0,t.jsxs)(g.Cf,{className:"max-w-2xl",children:[(0,t.jsxs)(g.c7,{children:[(0,t.jsxs)(g.L3,{className:"flex items-center gap-2",children:[(0,t.jsx)(w.A,{className:"w-5 h-5 text-cyan-400"}),"Import Template"]}),(0,t.jsx)(g.rr,{children:"Import a template from an exported JSON file"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-2 p-3 rounded-lg bg-muted/50 border border-border/50",children:[(0,t.jsx)(L.A,{className:"w-4 h-4 text-muted-foreground mt-0.5 shrink-0"}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1",children:[(0,t.jsx)("p",{children:"Paste template JSON exported from another Podmangr instance or created manually."}),(0,t.jsx)("p",{className:"font-medium",children:"Required fields:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside pl-1",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("code",{className:"px-1 py-0.5 bg-muted rounded",children:"name"})," - Template name"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("code",{className:"px-1 py-0.5 bg-muted rounded",children:"compose_content"})," - Docker Compose YAML"]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{children:"Template JSON"}),(0,t.jsx)(h,{value:ef,onChange:e=>ev(e.target.value),placeholder:'{\n  "name": "my-template",\n  "description": "Template description",\n  "version": "1.0.0",\n  "compose_content": "version: \'3.8\'\\nservices:\\n  ...",\n  "env_defaults": { "KEY": "value" },\n  "tags": ["web", "database"]\n}',rows:12,className:"font-mono text-sm bg-background/50"})]})]}),(0,t.jsxs)(g.Es,{children:[(0,t.jsx)(o.$,{variant:"outline",onClick:()=>H(!1),children:"Cancel"}),(0,t.jsxs)(o.$,{onClick:eJ,className:"gap-2",children:[(0,t.jsx)(w.A,{className:"w-4 h-4"})," Import"]})]})]})}),(0,t.jsx)(g.lG,{open:Q,onOpenChange:X,children:(0,t.jsxs)(g.Cf,{className:"max-w-3xl max-h-[90vh]",children:[(0,t.jsxs)(g.c7,{children:[(0,t.jsxs)(g.L3,{className:"flex items-center gap-2",children:[(0,t.jsx)(L.A,{className:"w-5 h-5 text-cyan-400"}),null==D?void 0:D.name,(0,t.jsxs)(p.E,{variant:"outline",className:"ml-2",children:["v",(null==D?void 0:D.version)||"1.0"]})]}),(0,t.jsx)(g.rr,{children:(null==D?void 0:D.description)||"No description"})]}),(0,t.jsx)(u.F,{className:"max-h-[60vh]",children:(0,t.jsxs)("div",{className:"space-y-4 p-1",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground pb-4 border-b border-border/50",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(S.A,{className:"w-4 h-4"}),"Author: ",null==D?void 0:D.author]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(T,{className:"w-4 h-4"}),"Created: ",D?e_(D.created_at):""]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(E.A,{className:"w-4 h-4"}),"Used ",null==D?void 0:D.usage_count," times"]})]}),D&&eR(D.tags).length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:eR(D.tags).map(e=>(0,t.jsxs)(p.E,{variant:"secondary",children:[(0,t.jsx)(A,{className:"w-3 h-3 mr-1"}),e]},e))}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{className:"text-sm font-medium",children:"Compose File"}),(0,t.jsx)("pre",{className:"p-4 rounded-lg bg-background/50 border border-border/50 overflow-x-auto text-sm font-mono whitespace-pre",children:null==D?void 0:D.compose_content})]}),(null==D?void 0:D.env_defaults)&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(m.J,{className:"text-sm font-medium",children:"Default Environment Variables"}),(0,t.jsx)("pre",{className:"p-4 rounded-lg bg-background/50 border border-border/50 overflow-x-auto text-sm font-mono",children:(()=>{try{let e=JSON.parse(D.env_defaults);return Object.entries(e).map(e=>{let[s,a]=e;return"".concat(s,"=").concat(a)}).join("\n")}catch(e){return D.env_defaults}})()})]})]})}),(0,t.jsxs)(g.Es,{children:[(0,t.jsx)(o.$,{variant:"outline",onClick:()=>X(!1),children:"Close"}),a&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(o.$,{variant:"outline",onClick:()=>{X(!1),D&&eO(D)},className:"gap-2",children:[(0,t.jsx)(O.A,{className:"w-4 h-4"})," Edit"]}),(0,t.jsxs)(o.$,{onClick:()=>{X(!1),D&&ez(D)},className:"gap-2",children:[(0,t.jsx)(J,{className:"w-4 h-4"})," Deploy"]})]})]})]})})]})}function D(){let{isAuthenticated:e,isLoading:s,token:a,user:i}=(0,l.A)(),o=(0,n.useRouter)(),[d,m]=(0,r.useState)(""),p=(null==i?void 0:i.role)==="admin"||(null==i?void 0:i.role)==="operator"||(null==i?void 0:i.is_pam_admin),x=(null==i?void 0:i.role)==="admin";return((0,r.useEffect)(()=>{let e=()=>{m(new Date().toLocaleTimeString("en-US",{hour12:!1}))};e();let s=setInterval(e,1e3);return()=>clearInterval(s)},[]),(0,r.useEffect)(()=>{s||e?s||!e||p||o.push("/dashboard"):o.push("/login")},[e,s,p,o]),!s&&e&&p)?(0,t.jsx)(c.N,{title:"TEMPLATES",time:d,children:(0,t.jsx)("div",{className:"p-6 space-y-6",children:(0,t.jsx)($,{token:a||"",isAdmin:x})})}):(0,t.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,t.jsx)(E.A,{className:"w-12 h-12 text-accent animate-pulse"})})}},4212:(e,s,a)=>{"use strict";function t(e,[s,a]){return Math.min(a,Math.max(s,e))}a.d(s,{q:()=>t})},4452:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("file-braces",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]])},4679:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>m,Es:()=>x,L3:()=>h,c7:()=>p,lG:()=>c,rr:()=>u,zM:()=>i});var t=a(5155);a(2115);var r=a(1590),n=a(5229),l=a(5016);function c(e){let{...s}=e;return(0,t.jsx)(r.bL,{"data-slot":"dialog",...s})}function i(e){let{...s}=e;return(0,t.jsx)(r.l9,{"data-slot":"dialog-trigger",...s})}function o(e){let{...s}=e;return(0,t.jsx)(r.ZL,{"data-slot":"dialog-portal",...s})}function d(e){let{className:s,...a}=e;return(0,t.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function m(e){let{className:s,children:a,showCloseButton:c=!0,...i}=e;return(0,t.jsxs)(o,{"data-slot":"dialog-portal",children:[(0,t.jsx)(d,{}),(0,t.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...i,children:[a,c&&(0,t.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(n.A,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function p(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",s),...a})}function x(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,l.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function h(e){let{className:s,...a}=e;return(0,t.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,l.cn)("text-lg leading-none font-semibold",s),...a})}function u(e){let{className:s,...a}=e;return(0,t.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,l.cn)("text-muted-foreground text-sm",s),...a})}},5426:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},6170:(e,s,a)=>{"use strict";a.d(s,{p:()=>n});var t=a(5155);a(2115);var r=a(5016);function n(e){let{className:s,type:a,...n}=e;return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...n})}},7346:(e,s,a)=>{"use strict";a.d(s,{F:()=>l});var t=a(5155);a(2115);var r=a(7397),n=a(5016);function l(e){let{className:s,children:a,...l}=e;return(0,t.jsxs)(r.bL,{"data-slot":"scroll-area",className:(0,n.cn)("relative",s),...l,children:[(0,t.jsx)(r.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),(0,t.jsx)(c,{}),(0,t.jsx)(r.OK,{})]})}function c(e){let{className:s,orientation:a="vertical",...l}=e;return(0,t.jsx)(r.VM,{"data-slot":"scroll-area-scrollbar",orientation:a,className:(0,n.cn)("flex touch-none p-px transition-colors select-none","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",s),...l,children:(0,t.jsx)(r.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}},7666:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(1847).A)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]])},9840:(e,s,a)=>{Promise.resolve().then(a.bind(a,1370))}},e=>{e.O(0,[4095,6189,2047,8720,5073,2940,9837,8441,1255,7358],()=>e(e.s=9840)),_N_E=e.O()}]);