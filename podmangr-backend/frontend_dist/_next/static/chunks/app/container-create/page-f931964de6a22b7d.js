(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1117],{235:(e,s,t)=>{"use strict";t.d(s,{J:()=>l});var a=t(5155);t(2115);var r=t(489),n=t(5016);function l(e){let{className:s,...t}=e;return(0,a.jsx)(r.b,{"data-slot":"label",className:(0,n.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),...t})}},923:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>i,av:()=>c,j7:()=>o,tU:()=>l});var a=t(5155);t(2115);var r=t(5218),n=t(5016);function l(e){let{className:s,...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"tabs",className:(0,n.cn)("flex flex-col gap-2",s),...t})}function o(e){let{className:s,...t}=e;return(0,a.jsx)(r.B8,{"data-slot":"tabs-list",className:(0,n.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)(r.l9,{"data-slot":"tabs-trigger",className:(0,n.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)(r.UC,{"data-slot":"tabs-content",className:(0,n.cn)("flex-1 outline-none",s),...t})}},2559:(e,s,t)=>{"use strict";t.d(s,{Fc:()=>o,TN:()=>i});var a=t(5155);t(2115);var r=t(3101),n=t(5016);let l=(0,r.F)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function o(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,n.cn)(l({variant:t}),s),...r})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"alert-description",className:(0,n.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",s),...t})}},4679:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>m,Es:()=>x,L3:()=>h,c7:()=>u,lG:()=>o,rr:()=>p,zM:()=>i});var a=t(5155);t(2115);var r=t(1590),n=t(5229),l=t(5016);function o(e){let{...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"dialog",...s})}function i(e){let{...s}=e;return(0,a.jsx)(r.l9,{"data-slot":"dialog-trigger",...s})}function c(e){let{...s}=e;return(0,a.jsx)(r.ZL,{"data-slot":"dialog-portal",...s})}function d(e){let{className:s,...t}=e;return(0,a.jsx)(r.hJ,{"data-slot":"dialog-overlay",className:(0,l.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function m(e){let{className:s,children:t,showCloseButton:o=!0,...i}=e;return(0,a.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,a.jsx)(d,{}),(0,a.jsxs)(r.UC,{"data-slot":"dialog-content",className:(0,l.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...i,children:[t,o&&(0,a.jsxs)(r.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function u(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,l.cn)("flex flex-col gap-2 text-center sm:text-left",s),...t})}function x(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,l.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...t})}function h(e){let{className:s,...t}=e;return(0,a.jsx)(r.hE,{"data-slot":"dialog-title",className:(0,l.cn)("text-lg leading-none font-semibold",s),...t})}function p(e){let{className:s,...t}=e;return(0,a.jsx)(r.VY,{"data-slot":"dialog-description",className:(0,l.cn)("text-muted-foreground text-sm",s),...t})}},6013:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>R});var a=t(5155),r=t(2115),n=t(63),l=t(6707),o=t(6198),i=t(5781),c=t(7003),d=t(6170),m=t(235),u=t(3209),x=t(923),h=t(7507),p=t(7235),g=t(7812),v=t(7346),j=t(4679),f=t(6132),b=t(6191),N=t(4639),y=t(2559);let w=[{port:"80",name:"HTTP",protocol:"tcp"},{port:"443",name:"HTTPS",protocol:"tcp"},{port:"3000",name:"Dev Server",protocol:"tcp"},{port:"8080",name:"Alt HTTP",protocol:"tcp"},{port:"5432",name:"PostgreSQL",protocol:"tcp"},{port:"3306",name:"MySQL",protocol:"tcp"},{port:"6379",name:"Redis",protocol:"tcp"},{port:"27017",name:"MongoDB",protocol:"tcp"},{port:"9000",name:"SonarQube",protocol:"tcp"},{port:"8443",name:"Alt HTTPS",protocol:"tcp"}];function k(e){var s;let{ports:t,onPortsChange:n}=e,{token:o}=(0,l.A)(),[i,u]=(0,r.useState)([]),[x,p]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[k,C]=(0,r.useState)("tcp");(0,r.useEffect)(()=>{(async()=>{if(o)try{let e=await fetch("/api/ports/used",{headers:{Authorization:"Bearer ".concat(o)}});if(e.ok){let s=await e.json();u(s||[])}}catch(e){console.error("Failed to fetch used ports:",e)}})()},[o]);let A=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tcp";return i.some(t=>t.port===parseInt(e)&&t.protocol===s)},S=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tcp";return i.find(t=>t.port===parseInt(e)&&t.protocol===s)};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(m.J,{className:"mb-2 block",children:"Common Ports"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:w.map(e=>{let s=A(e.port,e.protocol),r=S(e.port,e.protocol);return(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsxs)(c.$,{variant:s?"secondary":"outline",size:"sm",onClick:()=>{var s,a;!A(s=e.port,a=e.protocol)&&n([...t,{hostPort:s,containerPort:s,protocol:a}])},disabled:s,className:s?"opacity-50":"",children:[e.port," (",e.name,")"]}),s&&r&&(0,a.jsx)("div",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block z-10 w-48",children:(0,a.jsxs)("div",{className:"bg-popover border rounded-lg shadow-lg p-2 text-xs",children:[(0,a.jsx)("p",{className:"font-semibold",children:"In use by:"}),(0,a.jsx)("p",{className:"text-muted-foreground truncate",children:r.container_name||r.container_id})]})})]},"".concat(e.port,"-").concat(e.protocol))})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-2",children:[(0,a.jsxs)("div",{className:"col-span-4 space-y-2",children:[(0,a.jsx)(m.J,{children:"Host Port"}),(0,a.jsx)(d.p,{type:"number",placeholder:"8080",value:x,onChange:e=>p(e.target.value)}),x&&A(x,k)&&(0,a.jsxs)(y.Fc,{variant:"destructive",className:"mt-2",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),(0,a.jsxs)(y.TN,{className:"text-xs",children:["Port ",x,"/",k," is already in use by"," ",null==(s=S(x,k))?void 0:s.container_name]})]})]}),(0,a.jsxs)("div",{className:"col-span-4 space-y-2",children:[(0,a.jsx)(m.J,{children:"Container Port"}),(0,a.jsx)(d.p,{type:"number",placeholder:"80",value:v,onChange:e=>j(e.target.value)})]}),(0,a.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,a.jsx)(m.J,{children:"Protocol"}),(0,a.jsxs)(h.l6,{value:k,onValueChange:e=>C(e),children:[(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"tcp",children:"TCP"}),(0,a.jsx)(h.eb,{value:"udp",children:"UDP"})]})]})]}),(0,a.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,a.jsx)(m.J,{className:"invisible",children:"Add"}),(0,a.jsx)(c.$,{onClick:()=>{x&&v&&(n([...t,{hostPort:x,containerPort:v,protocol:k}]),p(""),j(""))},className:"w-full",children:(0,a.jsx)(b.A,{className:"h-4 w-4"})})]})]}),t.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Configured Ports"}),(0,a.jsx)("div",{className:"space-y-2",children:t.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{className:"font-mono text-sm",children:[e.hostPort," → ",e.containerPort]}),(0,a.jsx)(g.E,{variant:"secondary",children:e.protocol.toUpperCase()})]}),(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{n(t.filter((e,t)=>t!==s))},children:(0,a.jsx)("span",{className:"h-4 w-4",children:"\xd7"})})]},s))})]})]})}var C=t(5626),A=t(5299),S=t(5921),_=t(6651),P=t(3327),E=t(5880),z=t(9867),T=t(523),J=t(1360),O=t(1786),B=t(9715),L=t(1362),F=t(8874),H=t(5870),M=t(803);function V(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)(),{token:t}=(0,l.A)(),{settings:y}=(0,o.t)(),w=(0,r.useRef)(null),V=s.get("edit"),R=!!V,[I,D]=(0,r.useState)(!1),[U,W]=(0,r.useState)(""),[$,Z]=(0,r.useState)(""),[q,G]=(0,r.useState)(""),[X,K]=(0,r.useState)("latest"),[Q,Y]=(0,r.useState)(y.container.autoStartContainers),[ee,es]=(0,r.useState)(y.container.enablePrivilegedByDefault),[et,ea]=(0,r.useState)(y.container.defaultNetworkMode),[er,en]=(0,r.useState)(y.container.defaultRestartPolicy),[el,eo]=(0,r.useState)(""),[ei,ec]=(0,r.useState)([]),[ed,em]=(0,r.useState)(""),[eu,ex]=(0,r.useState)([]),[eh,ep]=(0,r.useState)(!1),[eg,ev]=(0,r.useState)([]),[ej,ef]=(0,r.useState)([]),[eb,eN]=(0,r.useState)("volume"),[ey,ew]=(0,r.useState)(""),[ek,eC]=(0,r.useState)(""),[eA,eS]=(0,r.useState)(""),[e_,eP]=(0,r.useState)(!1),[eE,ez]=(0,r.useState)([]),[eT,eJ]=(0,r.useState)([]),[eO,eB]=(0,r.useState)(""),[eL,eF]=(0,r.useState)(""),[eH,eM]=(0,r.useState)(""),[eV,eR]=(0,r.useState)(""),[eI,eD]=(0,r.useState)(""),[eU,eW]=(0,r.useState)(""),[e$,eZ]=(0,r.useState)(""),[eq,eG]=(0,r.useState)(""),[eX,eK]=(0,r.useState)(""),[eQ,eY]=(0,r.useState)(null),[e0,e5]=(0,r.useState)([]),[e1,e2]=(0,r.useState)(!1),[e4,e3]=(0,r.useState)(!1),[e6,e7]=(0,r.useState)([]),[e9,e8]=(0,r.useState)([]),[se,ss]=(0,r.useState)(!1),[st,sa]=(0,r.useState)(!1),[sr,sn]=(0,r.useState)(!1),[sl,so]=(0,r.useState)(!1),[si,sc]=(0,r.useState)(""),[sd,sm]=(0,r.useState)([]),[su,sx]=(0,r.useState)(null),sh=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{if(t)try{let e=await fetch("/api/volumes",{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let s=await e.json();ez(s||[])}}catch(e){console.error("Failed to fetch volumes:",e)}})()},[t]),(0,r.useEffect)(()=>{(async()=>{if(t)try{let e=await fetch("/api/pods",{headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){let s=await e.json();ec(s||[])}}catch(e){console.error("Failed to fetch pods:",e)}})()},[t]),(0,r.useEffect)(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[e9,e6]),(0,r.useEffect)(()=>{sh.current&&(sh.current.scrollTop=sh.current.scrollHeight)},[sd]),(0,r.useEffect)(()=>{V&&t&&(async()=>{D(!0),eY(null);try{var e,s;let a=await fetch("/api/containers/".concat(V),{headers:{Authorization:"Bearer ".concat(t)}});if(!a.ok)throw Error("Failed to load container configuration");let r=await a.json(),n=(null==(e=r.name)?void 0:e.replace(/^\//,""))||"";Z(n),W(n);let l=r.image||"",o=l.lastIndexOf(":");if(o>0&&!l.substring(o).includes("/")?(G(l.substring(0,o)),K(l.substring(o+1))):(G(l),K("latest")),(null==(s=r.restart_policy)?void 0:s.name)&&en(r.restart_policy.name),r.network_mode&&ea(r.network_mode),r.hostname&&eZ(r.hostname),r.user&&eW(r.user),r.working_dir&&eD(r.working_dir),r.env&&Array.isArray(r.env)){let e=new Set(["PATH","HOME","HOSTNAME","TERM"]),s=r.env.map(e=>{let s=e.indexOf("=");return s>0?{key:e.substring(0,s),value:e.substring(s+1)}:null}).filter(s=>null!==s&&!e.has(s.key));eJ(s)}if(r.port_bindings){let e=[];for(let[s,t]of Object.entries(r.port_bindings)){let[a,r]=s.split("/");if(Array.isArray(t))for(let s of t)e.push({hostPort:s.HostPort||a,containerPort:a,protocol:r||"tcp"})}ev(e)}if(r.mounts&&Array.isArray(r.mounts)){let e=r.mounts.filter(e=>"bind"===e.Type||"volume"===e.Type).map(e=>({type:"volume"===e.Type?"volume":"bind",hostPath:"bind"===e.Type&&e.Source||"",volumeName:"volume"===e.Type&&e.Source||"",containerPath:e.Destination||"",readOnly:!e.RW}));ef(e)}if(r.cmd&&Array.isArray(r.cmd)&&r.cmd.length>0&&eM(r.cmd.join(" ")),r.entrypoint&&Array.isArray(r.entrypoint)&&r.entrypoint.length>0&&eR(r.entrypoint.join(" ")),r.memory_limit&&r.memory_limit>0){let e=Math.round(r.memory_limit/1048576);eK("".concat(e,"m"))}void 0!==r.auto_start&&Y(r.auto_start)}catch(e){eY(e instanceof Error?e.message:"Failed to load container")}finally{D(!1)}})()},[V,t]);let sp=(0,r.useCallback)(()=>({name:$||void 0,image:X?"".concat(q,":").concat(X):q,auto_start:Q,privileged:ee,network_mode:et,restart_policy:er,pod_id:el||void 0,ports:eg.map(e=>({host_port:parseInt(e.hostPort),container_port:parseInt(e.containerPort),protocol:e.protocol})),volumes:ej.map(e=>({type:e.type,source:"bind"===e.type?e.hostPath:e.volumeName,target:e.containerPath,read_only:e.readOnly})),environment:eT.reduce((e,s)=>(e[s.key]=s.value,e),{}),command:eH?eH.split(" "):void 0,entrypoint:eV?eV.split(" "):void 0,work_dir:eI||void 0,user:eU||void 0,hostname:e$||void 0,cpu_limit:eq?parseFloat(eq):void 0,memory_limit:eX?1024*parseInt(eX)*1024:void 0}),[$,X,q,Q,ee,et,er,el,eg,ej,eT,eH,eV,eI,eU,e$,eq,eX]);(0,r.useEffect)(()=>{let e=setTimeout(async()=>{if(!t||!q)return void e5([]);e2(!0);try{let e=sp(),s=await fetch("/api/containers/validate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(e)});if(s.ok){let e=await s.json();e5(e.results||[])}}catch(e){console.error("Validation error:",e)}finally{e2(!1)}},500);return()=>clearTimeout(e)},[t,q,sp]);let sg=async()=>{if(!q)return void eY("Please specify an image");if(e0.some(e=>"error"===e.status))return void eY("Please fix validation errors before deploying");if(e3(!0),e7([]),e8([]),ss(!1),sa(!1),R&&V){e7([{step:"replace",message:"Stopping old container...",error:!1}]);try{if(await fetch("/api/containers/".concat(V,"/stop"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}}),e7([{step:"replace",message:"Removing old container...",error:!1}]),!(await fetch("/api/containers/".concat(V,"?force=true"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok)throw Error("Failed to remove old container");e7([{step:"replace",message:"Old container removed",error:!1,complete:!0}])}catch(e){e7(s=>[...s,{step:"replace",message:"Failed to replace container: ".concat(e instanceof Error?e.message:"Unknown error"),error:!0}]),sa(!0);return}}let e="https:"===window.location.protocol?"wss:":"ws:",s=new WebSocket("".concat(e,"//").concat(window.location.host,"/api/containers/deploy"));s.onopen=()=>{s.send(JSON.stringify(sp()))},s.onmessage=e=>{try{let s=JSON.parse(e.data);s.output?e8(e=>[...e,s.message]):(e7(e=>e.find(e=>e.step===s.step)?e.map(e=>e.step===s.step?s:e):[...e,s]),s.error&&sa(!0),"complete"===s.step&&s.complete&&ss(!0))}catch(e){console.error("WebSocket message parse error:",e)}},s.onerror=()=>{e7(e=>[...e,{step:"error",message:"WebSocket connection failed",error:!0}]),sa(!0)},s.onclose=()=>{se||st||e7(e=>[...e,{step:"error",message:"Connection closed unexpectedly",error:!0}])}},sv=(0,r.useCallback)(async e=>{if(!e.trim()||!t)return void ex([]);ep(!0);try{let s=await fetch("/api/dockerhub/search?query=".concat(encodeURIComponent(e),"&page_size=10"),{headers:{Authorization:"Bearer ".concat(t)}});if(!s.ok)throw Error("Failed to search Docker Hub");let a=await s.json();ex(a.results||[])}catch(e){console.error("Docker Hub search error:",e),ex([])}finally{ep(!1)}},[t]);return(0,r.useEffect)(()=>{let e=setTimeout(()=>{sv(ed)},500);return()=>clearTimeout(e)},[ed,sv]),(0,a.jsxs)(i.N,{children:[(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>e.push("/container-manager"),children:(0,a.jsx)(C.A,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:R?"Edit Container":"Create Container"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:R?"Editing ".concat(U||"container"," - changes will recreate the container"):"Deploy a new container with custom configuration"})]}),I&&(0,a.jsx)(A.A,{className:"h-5 w-5 animate-spin text-muted-foreground"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(c.$,{variant:"outline",onClick:()=>e.push("/container-manager"),children:"Cancel"}),(0,a.jsxs)(c.$,{onClick:sg,disabled:e1||I||!q||e0.some(e=>"error"===e.status),children:[(0,a.jsx)(S.A,{className:"h-4 w-4 mr-2"}),R?"Update Container":"Deploy Container"]})]})]}),eQ&&(0,a.jsx)("div",{className:"mx-6 mt-4 p-4 bg-destructive/10 border border-destructive/20 rounded-lg text-destructive",children:eQ}),e0.some(e=>"error"===e.status)&&(0,a.jsxs)("div",{className:"mx-6 mt-4 p-4 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-amber-500 font-medium mb-2",children:[(0,a.jsx)(f.A,{className:"h-4 w-4"}),"Configuration Issues"]}),(0,a.jsx)("ul",{className:"text-sm text-amber-400 space-y-1",children:e0.filter(e=>"error"===e.status).map((e,s)=>(0,a.jsxs)("li",{children:["• ",e.message,": ",e.details]},s))})]}),(0,a.jsx)(v.F,{className:"flex-1",children:(0,a.jsxs)("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Container Image"}),(0,a.jsx)(u.BT,{children:"Select or search for a Docker image from Docker Hub"})]}),(0,a.jsxs)(u.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(_.A,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(d.p,{placeholder:"Search Docker Hub (e.g., nginx, postgres, redis)...",value:ed,onChange:e=>em(e.target.value),className:"pl-9"}),eh&&(0,a.jsx)("div",{className:"absolute right-3 top-3 text-xs text-muted-foreground",children:"Searching..."})]}),eu.length>0&&(0,a.jsxs)(u.Zp,{className:"border-dashed",children:[(0,a.jsx)(u.aR,{className:"pb-3",children:(0,a.jsx)(u.ZB,{className:"text-sm",children:"Search Results"})}),(0,a.jsx)(u.Wu,{className:"space-y-2",children:eu.map((e,s)=>(0,a.jsxs)("button",{type:"button",className:"w-full flex items-start justify-between p-3 rounded-lg border bg-card hover:bg-accent cursor-pointer transition-colors group text-left",onClick:()=>{console.log("Clicked image:",e.repo_name),console.log("Selecting image:",e),G(e.repo_name),em(""),ex([])},children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"font-semibold group-hover:text-primary transition-colors",children:e.repo_name}),e.is_official&&(0,a.jsx)(g.E,{variant:"default",className:"text-xs",children:"Official"}),e.is_automated&&(0,a.jsx)(g.E,{variant:"secondary",className:"text-xs",children:"Automated"}),!e.is_official&&e.repo_owner&&(0,a.jsxs)(g.E,{variant:"outline",className:"text-xs",children:["by ",e.repo_owner]})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.short_description||"No description available"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["★ ",e.star_count.toLocaleString()]}),(0,a.jsxs)("span",{children:["↓ ",e.pull_count.toLocaleString()," pulls"]})]})]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground group-hover:text-primary transition-colors",children:"Click to select →"})]},s))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Image Name"}),(0,a.jsx)(d.p,{placeholder:"e.g., nginx, postgres, myapp",value:q,onChange:e=>G(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Tag"}),(0,a.jsx)(d.p,{placeholder:"latest",value:X,onChange:e=>K(e.target.value)})]})]}),q&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[(0,a.jsx)(P.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)("span",{className:"text-sm",children:["Will pull: ",(0,a.jsxs)("code",{className:"px-1.5 py-0.5 bg-background rounded",children:[q,":",X]})]}),(0,a.jsxs)("a",{href:"https://hub.docker.com/r/".concat(q),target:"_blank",rel:"noopener noreferrer",className:"ml-auto text-xs text-primary hover:underline flex items-center gap-1",children:["View on Docker Hub",(0,a.jsx)(E.A,{className:"h-3 w-3"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-accent/10 border border-accent/20 rounded-lg",children:[(0,a.jsx)(z.A,{className:"h-4 w-4 text-accent"}),(0,a.jsx)("span",{className:"text-sm flex-1",children:"Pull image to auto-detect ports, volumes, and environment variables"}),(0,a.jsx)(c.$,{variant:"outline",size:"sm",onClick:()=>(e=>{if(!q)return void eY("Please enter an image name first");sn(!0),so(!0),sc("connecting"),sm([]),sx(null);let s="https:"===window.location.protocol?"wss:":"ws:",t=new WebSocket("".concat(s,"//").concat(window.location.host,"/api/images/inspect/ws"));t.onopen=()=>{let s=X?"".concat(q,":").concat(X):q;t.send(JSON.stringify({image:s,pull:e}))},t.onmessage=e=>{try{let s=JSON.parse(e.data);if(s.error){sc("error"),sm(e=>[...e,"Error: ".concat(s.error)]),so(!1);return}"pulling"===s.status?(sc("pulling"),s.output?sm(e=>[...e,s.output]):s.message&&sm(e=>[...e,s.message])):"pulled"===s.status?sm(e=>[...e,"✓ Image pulled successfully"]):"inspecting"===s.status?(sc("inspecting"),sm(e=>[...e,"Analyzing image configuration..."])):"complete"===s.status?(sc("complete"),s.config&&(sx(s.config),sm(e=>[...e,"✓ Image configuration loaded"])),so(!1)):"not_found"===s.status&&(sc("not_found"),so(!1))}catch(e){console.error("WebSocket message parse error:",e)}},t.onerror=()=>{sc("error"),sm(e=>[...e,"WebSocket connection failed"]),so(!1)},t.onclose=()=>{sl&&so(!1)}})(!0),disabled:sl,children:sl?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Inspecting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(_.A,{className:"h-4 w-4 mr-2"}),"Pull & Inspect"]})})]})]})]})]}),(0,a.jsxs)(x.tU,{defaultValue:"basic",className:"w-full",children:[(0,a.jsxs)(x.j7,{className:"grid w-full grid-cols-5",children:[(0,a.jsx)(x.Xi,{value:"basic",children:"Basic"}),(0,a.jsx)(x.Xi,{value:"ports",children:"Ports"}),(0,a.jsx)(x.Xi,{value:"volumes",children:"Volumes"}),(0,a.jsx)(x.Xi,{value:"env",children:"Environment"}),(0,a.jsx)(x.Xi,{value:"advanced",children:"Advanced"})]}),(0,a.jsx)(x.av,{value:"basic",className:"space-y-4",children:(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Basic Configuration"}),(0,a.jsx)(u.BT,{children:"Configure basic container settings"})]}),(0,a.jsxs)(u.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Container Name (optional)"}),(0,a.jsx)(d.p,{placeholder:"my-container",value:$,onChange:e=>Z(e.target.value)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"If not specified, a random name will be generated"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Pod (optional)"}),(0,a.jsxs)(h.l6,{value:el||"none",onValueChange:e=>eo("none"===e?"":e),children:[(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{placeholder:"None - standalone container"})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"none",children:"None - standalone container"}),ei.filter(e=>"exited"!==e.status.toLowerCase()).map(e=>(0,a.jsxs)(h.eb,{value:e.id,children:[e.name," (",e.status,")"]},e.id))]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Add this container to an existing pod for shared networking"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Network Mode"}),(0,a.jsxs)(h.l6,{value:et,onValueChange:ea,children:[(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"bridge",children:"Bridge"}),(0,a.jsx)(h.eb,{value:"host",children:"Host"}),(0,a.jsx)(h.eb,{value:"none",children:"None"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Restart Policy"}),(0,a.jsxs)(h.l6,{value:er,onValueChange:en,children:[(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"no",children:"No"}),(0,a.jsx)(h.eb,{value:"always",children:"Always"}),(0,a.jsx)(h.eb,{value:"unless-stopped",children:"Unless Stopped"}),(0,a.jsx)(h.eb,{value:"on-failure",children:"On Failure"})]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(m.J,{children:"Auto-start container"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Start the container immediately after creation"})]}),(0,a.jsx)(p.d,{checked:Q,onCheckedChange:Y})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(m.J,{children:"Privileged mode"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Grant extended privileges (use with caution)"})]}),(0,a.jsx)(p.d,{checked:ee,onCheckedChange:es})]})]})]})}),(0,a.jsx)(x.av,{value:"ports",className:"space-y-4",children:(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Port Mappings"}),(0,a.jsx)(u.BT,{children:"Expose container ports to the host. Ports in use are highlighted."})]}),(0,a.jsx)(u.Wu,{children:(0,a.jsx)(k,{ports:eg,onPortsChange:ev})})]})}),(0,a.jsx)(x.av,{value:"volumes",className:"space-y-4",children:(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Volume Mounts"}),(0,a.jsx)(u.BT,{children:"Mount Podman volumes or host directories into the container. Podman volumes are recommended for better isolation and portability."})]}),(0,a.jsxs)(u.Wu,{className:"space-y-4",children:[(0,a.jsx)("div",{className:"p-3 bg-accent/10 border border-accent/20 rounded-lg text-sm",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(P.A,{className:"h-4 w-4 text-accent mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-accent",children:"Volume Types"}),(0,a.jsxs)("ul",{className:"mt-1 text-muted-foreground text-xs space-y-1",children:[(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Podman Volume"})," (recommended): Managed storage, better isolation, portable"]}),(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:"Bind Mount"}),": Direct host directory access, for config files or shared data"]})]})]})]})}),(0,a.jsxs)("div",{className:"space-y-4 p-4 border rounded-lg bg-muted/30",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Volume Type"}),(0,a.jsxs)(h.l6,{value:eb,onValueChange:e=>eN(e),children:[(0,a.jsx)(h.bq,{children:(0,a.jsx)(h.yv,{})}),(0,a.jsxs)(h.gC,{children:[(0,a.jsx)(h.eb,{value:"volume",children:"Podman Volume"}),(0,a.jsx)(h.eb,{value:"bind",children:"Bind Mount"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Container Path"}),(0,a.jsx)(d.p,{placeholder:"/container/path",value:eA,onChange:e=>eS(e.target.value)})]})]}),"volume"===eb?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Volume Name"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(d.p,{placeholder:"my-volume (will be created if it doesn't exist)",value:ey,onChange:e=>ew(e.target.value),className:"flex-1"}),eE.length>0&&(0,a.jsxs)(h.l6,{onValueChange:e=>ew(e),children:[(0,a.jsx)(h.bq,{className:"w-48",children:(0,a.jsx)(h.yv,{placeholder:"Or select..."})}),(0,a.jsx)(h.gC,{children:eE.map(e=>(0,a.jsx)(h.eb,{value:e.name,children:e.name},e.name))})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter a name for a new volume or select an existing one"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Host Path"}),(0,a.jsx)(d.p,{placeholder:"/path/on/host",value:ek,onChange:e=>eC(e.target.value)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Absolute path to directory on the host system"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(m.J,{children:"Read-only mount"}),(0,a.jsx)(p.d,{checked:e_,onCheckedChange:eP})]}),(0,a.jsxs)(c.$,{onClick:()=>{var e;(e="volume"===eb?ey:ek)&&eA&&(ef([...ej,{type:eb,hostPath:"bind"===eb?e:"",volumeName:"volume"===eb?e:"",containerPath:eA,readOnly:e_}]),eC(""),eS(""),eP(!1),ew(""),eN("volume"))},className:"w-full",disabled:!eA||("volume"===eb?!ey:!ek),children:[(0,a.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Add Volume"]})]}),ej.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(m.J,{children:["Configured Volumes (",ej.length,")"]}),(0,a.jsx)("div",{className:"space-y-2",children:ej.map((e,s)=>(0,a.jsxs)("div",{className:"p-3 rounded-lg border ".concat(("bind"!==e.type||e.hostPath)&&("volume"!==e.type||e.volumeName)?"bg-card":"border-amber-500/50 bg-amber-500/5"),children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),(0,a.jsx)(g.E,{variant:"volume"===e.type?"default":"secondary",className:"text-xs",children:"volume"===e.type?"Podman Volume":"Bind Mount"}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground flex-1",children:"→"}),(0,a.jsx)("code",{className:"text-xs bg-muted px-2 py-1 rounded",children:e.containerPath}),e.readOnly&&(0,a.jsx)(g.E,{variant:"outline",className:"flex-shrink-0 text-xs",children:"RO"}),(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{ef(ej.filter((e,t)=>t!==s))},className:"h-6 w-6",children:(0,a.jsx)(J.A,{className:"h-3 w-3"})})]}),"volume"===e.type?(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(d.p,{placeholder:"Enter volume name (required)",value:e.volumeName,onChange:e=>{let t=[...ej];t[s]={...t[s],volumeName:e.target.value},ef(t)},className:"font-mono text-sm ".concat(e.volumeName?"":"border-amber-500/50")})}):(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(d.p,{placeholder:"Enter host path (required)",value:e.hostPath,onChange:e=>{let t=[...ej];t[s]={...t[s],hostPath:e.target.value},ef(t)},className:"font-mono text-sm ".concat(e.hostPath?"":"border-amber-500/50")})}),"bind"===e.type&&!e.hostPath&&(0,a.jsx)("p",{className:"text-xs text-amber-500 mt-1",children:"Host path required - enter the directory on your server"}),"volume"===e.type&&!e.volumeName&&(0,a.jsx)("p",{className:"text-xs text-amber-500 mt-1",children:"Volume name required"})]},s))})]})]})]})}),(0,a.jsx)(x.av,{value:"env",className:"space-y-4",children:(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Environment Variables"}),(0,a.jsx)(u.BT,{children:"Set environment variables for the container"})]}),(0,a.jsxs)(u.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=document.getElementById("env-file-input"))?void 0:e.click()},children:[(0,a.jsx)(O.A,{className:"h-4 w-4 mr-2"}),"Import .env"]}),(0,a.jsx)("input",{id:"env-file-input",type:"file",accept:".env,.txt",className:"hidden",onChange:e=>{var s;let t=null==(s=e.target.files)?void 0:s[0];if(!t)return;let a=new FileReader;a.onload=e=>{var s;let t=(null==(s=e.target)?void 0:s.result).split("\n"),a=[];t.forEach(e=>{let s=e.trim();if(s&&!s.startsWith("#")){let[e,...t]=s.split("=");e&&t.length>0&&a.push({key:e.trim(),value:t.join("=").trim().replace(/^["']|["']$/g,"")})}}),eJ([...eT,...a])},a.readAsText(t)}}),(0,a.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>{let e=new Blob([eT.map(e=>"".concat(e.key,"=").concat(e.value)).join("\n")],{type:"text/plain"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="".concat($||"container",".env"),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)},disabled:0===eT.length,children:[(0,a.jsx)(z.A,{className:"h-4 w-4 mr-2"}),"Export .env"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-2",children:[(0,a.jsxs)("div",{className:"col-span-5 space-y-2",children:[(0,a.jsx)(m.J,{children:"Key"}),(0,a.jsx)(d.p,{placeholder:"DATABASE_URL",value:eO,onChange:e=>eB(e.target.value.toUpperCase())})]}),(0,a.jsxs)("div",{className:"col-span-5 space-y-2",children:[(0,a.jsx)(m.J,{children:"Value"}),(0,a.jsx)(d.p,{placeholder:"postgres://...",value:eL,onChange:e=>eF(e.target.value)})]}),(0,a.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,a.jsx)(m.J,{className:"invisible",children:"Add"}),(0,a.jsx)(c.$,{onClick:()=>{eO&&eL&&(eJ([...eT,{key:eO,value:eL}]),eB(""),eF(""))},className:"w-full",children:(0,a.jsx)(b.A,{className:"h-4 w-4"})})]})]}),eT.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(m.J,{children:["Environment Variables (",eT.length,")"]}),(0,a.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:eT.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 p-2 rounded-lg border bg-card",children:[(0,a.jsx)(B.A,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),(0,a.jsx)(d.p,{value:e.key,onChange:e=>{let t=[...eT];t[s]={...t[s],key:e.target.value.toUpperCase()},eJ(t)},className:"font-mono text-sm w-40 flex-shrink-0",placeholder:"KEY"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"="}),(0,a.jsx)(d.p,{value:e.value,onChange:e=>{let t=[...eT];t[s]={...t[s],value:e.target.value},eJ(t)},className:"font-mono text-sm flex-1",placeholder:"value"}),(0,a.jsx)(c.$,{variant:"ghost",size:"icon",onClick:()=>{eJ(eT.filter((e,t)=>t!==s))},className:"flex-shrink-0 h-8 w-8",children:(0,a.jsx)(J.A,{className:"h-4 w-4"})})]},s))})]})]})]})}),(0,a.jsx)(x.av,{value:"advanced",className:"space-y-4",children:(0,a.jsxs)(u.Zp,{children:[(0,a.jsxs)(u.aR,{children:[(0,a.jsx)(u.ZB,{children:"Advanced Configuration"}),(0,a.jsx)(u.BT,{children:"Fine-tune container runtime settings"})]}),(0,a.jsxs)(u.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Command"}),(0,a.jsx)(d.p,{placeholder:"Override default command",value:eH,onChange:e=>eM(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Entrypoint"}),(0,a.jsx)(d.p,{placeholder:"Override default entrypoint",value:eV,onChange:e=>eR(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Working Directory"}),(0,a.jsx)(d.p,{placeholder:"/app",value:eI,onChange:e=>eD(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"User"}),(0,a.jsx)(d.p,{placeholder:"1000:1000 or username",value:eU,onChange:e=>eW(e.target.value)})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Hostname"}),(0,a.jsx)(d.p,{placeholder:"my-container",value:e$,onChange:e=>eZ(e.target.value)})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"CPU Limit (cores)"}),(0,a.jsx)(d.p,{type:"number",step:"0.1",placeholder:"1.5",value:eq,onChange:e=>eG(e.target.value)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Number of CPU cores (e.g., 1.5)"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(m.J,{children:"Memory Limit (MB)"}),(0,a.jsx)(d.p,{type:"number",placeholder:"512",value:eX,onChange:e=>eK(e.target.value)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Maximum memory in megabytes"})]})]})]})]})})]})]})})]}),(0,a.jsx)(j.lG,{open:e4,onOpenChange:e3,children:(0,a.jsxs)(j.Cf,{className:"max-w-2xl max-h-[80vh] overflow-hidden",children:[(0,a.jsx)(j.c7,{children:(0,a.jsx)(j.L3,{className:"flex items-center gap-2",children:se?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.A,{className:"h-5 w-5 text-green-500"}),"Deployment Complete"]}):st?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.A,{className:"h-5 w-5 text-red-500"}),"Deployment Failed"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.A,{className:"h-5 w-5 animate-spin"}),"Deploying Container"]})})}),(0,a.jsx)("div",{className:"space-y-3 overflow-hidden",children:e6.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg border overflow-hidden ".concat(e.error?"bg-red-500/10 border-red-500/30":e.complete?"bg-green-500/10 border-green-500/30":"bg-muted/50 border-muted"),children:[e.error?(0,a.jsx)(F.A,{className:"h-5 w-5 text-red-500 shrink-0 mt-0.5"}):e.complete?(0,a.jsx)(L.A,{className:"h-5 w-5 text-green-500 shrink-0 mt-0.5"}):(0,a.jsx)(A.A,{className:"h-5 w-5 animate-spin text-primary shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 overflow-hidden",children:[(0,a.jsx)("div",{className:"font-medium capitalize",children:"replace"===e.step?"Replace":"validate"===e.step?"Validation":"pull"===e.step?"Image":"volumes"===e.step?"Volumes":"create"===e.step?"Create":"start"===e.step?"Start":"complete"===e.step?"Complete":e.step}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground break-words",children:e.message})]})]},s))}),e9.length>0&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(m.J,{className:"mb-2 block",children:"Output"}),(0,a.jsx)(v.F,{className:"h-48 border rounded-lg bg-black/90 p-3",children:(0,a.jsx)("div",{ref:w,className:"font-mono text-xs text-green-400 space-y-0.5",children:e9.map((e,s)=>(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:e},s))})})]}),e0.length>0&&!se&&(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsx)(m.J,{className:"mb-2 block",children:"Pre-flight Checks"}),e0.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start gap-2 p-2 rounded text-sm ".concat("error"===e.status?"bg-red-500/10 text-red-400":"warning"===e.status?"bg-yellow-500/10 text-yellow-400":"bg-green-500/10 text-green-400"),children:["error"===e.status?(0,a.jsx)(F.A,{className:"h-4 w-4 shrink-0 mt-0.5"}):"warning"===e.status?(0,a.jsx)(f.A,{className:"h-4 w-4 shrink-0 mt-0.5"}):(0,a.jsx)(L.A,{className:"h-4 w-4 shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{className:"font-medium",children:[e.check,":"]})," ",e.message,e.details&&(0,a.jsx)("div",{className:"text-xs opacity-75 mt-1",children:e.details})]})]},s))]}),(0,a.jsx)("div",{className:"flex justify-end gap-2 mt-4",children:se?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.$,{variant:"outline",onClick:()=>e3(!1),children:"Deploy Another"}),(0,a.jsxs)(c.$,{onClick:()=>e.push("/container-manager"),children:[(0,a.jsx)(L.A,{className:"h-4 w-4 mr-2"}),"View Containers"]})]}):st?(0,a.jsx)(c.$,{variant:"outline",onClick:()=>e3(!1),children:"Close"}):null})]})}),(0,a.jsx)(j.lG,{open:sr,onOpenChange:e=>!sl&&sn(e),children:(0,a.jsxs)(j.Cf,{className:"max-w-2xl max-h-[80vh] flex flex-col overflow-hidden",children:[(0,a.jsx)(j.c7,{className:"flex-shrink-0",children:(0,a.jsx)(j.L3,{className:"flex items-center gap-2",children:"complete"===si?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(L.A,{className:"h-5 w-5 text-green-500"}),"Image Configuration Loaded"]}):"error"===si||"not_found"===si?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(F.A,{className:"h-5 w-5 text-red-500"}),"not_found"===si?"Image Not Found":"Inspection Failed"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A.A,{className:"h-5 w-5 animate-spin"}),"pulling"===si?"Pulling Image...":"Inspecting Image..."]})})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden min-h-0",children:[sd.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)(m.J,{className:"mb-2 block text-sm",children:"Progress"}),(0,a.jsx)(v.F,{className:"h-32 border rounded-lg bg-black/90 p-3",children:(0,a.jsx)("div",{ref:sh,className:"font-mono text-xs text-green-400 space-y-0.5",children:sd.map((e,s)=>(0,a.jsx)("div",{className:"whitespace-pre-wrap break-all",children:e},s))})})]}),su&&"complete"===si&&(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsx)(m.J,{className:"block text-sm font-semibold",children:"Discovered Configuration"}),su.exposed_ports&&su.exposed_ports.length>0&&(0,a.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 text-accent"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["Exposed Ports (",su.exposed_ports.length,")"]})]}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:su.exposed_ports.map((e,s)=>(0,a.jsxs)("span",{className:"px-2 py-1 bg-accent/20 rounded text-xs font-mono",children:[e.port,"/",e.protocol]},s))})]}),su.volumes&&su.volumes.length>0&&(0,a.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 text-accent"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["Required Volumes (",su.volumes.length,")"]})]}),(0,a.jsx)("div",{className:"space-y-1",children:su.volumes.map((e,s)=>(0,a.jsx)("div",{className:"text-xs font-mono text-muted-foreground",children:e},s))})]}),su.environment&&su.environment.filter(e=>e.has_value&&!["PATH","HOME","HOSTNAME"].includes(e.key)).length>0&&(0,a.jsxs)("div",{className:"p-3 bg-muted/50 rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)(H.A,{className:"h-4 w-4 text-accent flex-shrink-0"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["Environment Variables (",su.environment.filter(e=>e.has_value&&!["PATH","HOME","HOSTNAME"].includes(e.key)).length,")"]})]}),(0,a.jsx)("div",{className:"space-y-1 max-h-32 overflow-y-auto overflow-x-hidden",children:su.environment.filter(e=>e.has_value&&!["PATH","HOME","HOSTNAME","TERM","LANG","LC_ALL"].includes(e.key)&&!e.key.startsWith("GPG_")).map((e,s)=>(0,a.jsxs)("div",{className:"text-xs font-mono flex items-start gap-0 min-w-0",children:[(0,a.jsx)("span",{className:"text-primary flex-shrink-0",children:e.key}),(0,a.jsx)("span",{className:"text-muted-foreground flex-shrink-0",children:"="}),(0,a.jsx)("span",{className:"text-muted-foreground break-all",children:e.value.length>40?e.value.substring(0,40)+"...":e.value})]},s))})]}),su.working_dir&&(0,a.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"h-4 w-4 text-accent"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Working Directory:"}),(0,a.jsx)("span",{className:"text-xs font-mono text-muted-foreground",children:su.working_dir})]})}),(!su.exposed_ports||0===su.exposed_ports.length)&&(!su.volumes||0===su.volumes.length)&&(!su.environment||0===su.environment.filter(e=>e.has_value).length)&&(0,a.jsx)("div",{className:"p-3 bg-muted/50 rounded-lg text-center text-muted-foreground text-sm",children:"No specific configuration hints found in this image."})]}),"not_found"===si&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-destructive/10 border border-destructive/20 rounded-lg text-center",children:(0,a.jsx)("p",{className:"text-sm text-destructive",children:'Image not found locally. Click "Pull & Inspect" to download it.'})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2 mt-4 flex-shrink-0",children:["complete"===si&&su&&(0,a.jsxs)(c.$,{onClick:()=>{if(!su)return;if(su.exposed_ports&&su.exposed_ports.length>0){let e=su.exposed_ports.map(e=>({hostPort:String(e.port),containerPort:String(e.port),protocol:e.protocol||"tcp"}));ev(s=>{let t=new Set(s.map(e=>"".concat(e.containerPort,"/").concat(e.protocol)));return[...s,...e.filter(e=>!t.has("".concat(e.containerPort,"/").concat(e.protocol)))]})}if(su.volumes&&su.volumes.length>0){let e=$||q.replace(/[^a-zA-Z0-9-_]/g,"-"),s=su.volumes.map(s=>{let t=s.split("/").filter(Boolean).pop()||"data";return{type:"volume",hostPath:"",volumeName:"".concat(e,"-").concat(t).toLowerCase().replace(/[^a-z0-9-_]/g,"-"),containerPath:s,readOnly:!1}});ef(e=>{let t=new Set(e.map(e=>e.containerPath));return[...e,...s.filter(e=>!t.has(e.containerPath))]})}let e=new Set(["PATH","HOME","HOSTNAME","TERM","LANG","LC_ALL"]);if(su.environment&&su.environment.length>0){let s=su.environment.filter(s=>s.has_value&&!e.has(s.key)&&!s.key.startsWith("GPG_")).map(e=>({key:e.key,value:e.value}));eJ(e=>{let t=new Set(e.map(e=>e.key));return[...e,...s.filter(e=>!t.has(e.key))]})}su.working_dir&&!eI&&eD(su.working_dir),su.user&&!eU&&eW(su.user),sn(!1)},children:[(0,a.jsx)(L.A,{className:"h-4 w-4 mr-2"}),"Apply Configuration"]}),!sl&&(0,a.jsx)(c.$,{variant:"outline",onClick:()=>sn(!1),children:"complete"===si?"Skip":"Close"})]})]})})]})}function R(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)(i.N,{children:(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)(A.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}),children:(0,a.jsx)(V,{})})}},6170:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var a=t(5155);t(2115);var r=t(5016);function n(e){let{className:s,type:t,...n}=e;return(0,a.jsx)("input",{type:t,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),...n})}},7235:(e,s,t)=>{"use strict";t.d(s,{d:()=>l});var a=t(5155);t(2115);var r=t(6558),n=t(5016);function l(e){let{className:s,...t}=e;return(0,a.jsx)(r.bL,{"data-slot":"switch",className:(0,n.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:(0,a.jsx)(r.zi,{"data-slot":"switch-thumb",className:(0,n.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},7346:(e,s,t)=>{"use strict";t.d(s,{F:()=>l});var a=t(5155);t(2115);var r=t(7397),n=t(5016);function l(e){let{className:s,children:t,...l}=e;return(0,a.jsxs)(r.bL,{"data-slot":"scroll-area",className:(0,n.cn)("relative",s),...l,children:[(0,a.jsx)(r.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),(0,a.jsx)(o,{}),(0,a.jsx)(r.OK,{})]})}function o(e){let{className:s,orientation:t="vertical",...l}=e;return(0,a.jsx)(r.VM,{"data-slot":"scroll-area-scrollbar",orientation:t,className:(0,n.cn)("flex touch-none p-px transition-colors select-none","vertical"===t&&"h-full w-2.5 border-l border-l-transparent","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent",s),...l,children:(0,a.jsx)(r.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}},7507:(e,s,t)=>{"use strict";t.d(s,{bq:()=>m,eb:()=>x,gC:()=>u,l6:()=>c,yv:()=>d});var a=t(5155);t(2115);var r=t(8190),n=t(4033),l=t(5917),o=t(2108),i=t(5016);function c(e){let{...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"select",...s})}function d(e){let{...s}=e;return(0,a.jsx)(r.WT,{"data-slot":"select-value",...s})}function m(e){let{className:s,size:t="default",children:l,...o}=e;return(0,a.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,i.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...o,children:[l,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(n.A,{className:"size-4 opacity-50"})})]})}function u(e){let{className:s,children:t,position:n="popper",align:l="center",...o}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{"data-slot":"select-content",className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,align:l,...o,children:[(0,a.jsx)(h,{}),(0,a.jsx)(r.LM,{className:(0,i.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(p,{})]})})}function x(e){let{className:s,children:t,...n}=e;return(0,a.jsxs)(r.q7,{"data-slot":"select-item",className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(l.A,{className:"size-4"})})}),(0,a.jsx)(r.p4,{children:t})]})}function h(e){let{className:s,...t}=e;return(0,a.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(o.A,{className:"size-4"})})}function p(e){let{className:s,...t}=e;return(0,a.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(n.A,{className:"size-4"})})}},8657:(e,s,t)=>{Promise.resolve().then(t.bind(t,6013))}},e=>{e.O(0,[4095,6189,2047,1679,5073,3432,2940,9837,8441,1255,7358],()=>e(e.s=8657)),_N_E=e.O()}]);