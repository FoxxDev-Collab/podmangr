# Podmangr

**A Podman-focused container manager with useful system management tools.**

Podmangr treats Podman as a first-class citizen while providing the Linux system management tools you need to run containers effectively. Not a bloated "everything manager" - just Podman essentials + system basics.

---

## Project Identity

| Attribute | Value |
|-----------|-------|
| **Name** | Podmangr |
| **Tagline** | "Podman deserves better tooling." |
| **Focus** | Podman-first container management with useful system tools |
| **Target** | Homelab users, RHEL/Rocky enthusiasts, rootless-first deployments |
| **Stack** | Next.js (static export) + Go backend (Echo framework) |
| **License** | TBD (MIT? Apache 2.0? GPL?) |

---

## Current State

**Podmangr is being refactored from Stardeck** - a full-featured Linux management platform.

### What Already Exists (from Stardeck)
- âœ… Go backend with Echo framework
- âœ… Next.js frontend with shadcn/ui components
- âœ… Basic container management (list, start, stop, create, logs, terminal)
- âœ… Authentication system (JWT + PAM)
- âœ… WebSocket support (logs, terminal)
- âœ… Modern UI with theming support

### What Was Removed (Stardeck-Specific Bloat)
- âœ… Alliance (SSO/OIDC federation system) - REMOVED
- âœ… Realm Manager (authentication realms) - REMOVED
- âœ… Group Manager (local group management) - REMOVED
- âœ… RPM Manager (package management) - REMOVED
- âœ… Audit Log system - REMOVED
- âœ… File Browser - REMOVED
- âœ… Container App (Stardeck-specific) - REMOVED
- âœ… Desktop/Dashboard concept - REMOVED
- âœ… Stardeck branding and theming ("Starfleet", sci-fi elements) - REMOVED

### What We Kept (Useful System Management)
- âœ… System Monitor (CPU, memory, disk usage)
- âœ… Process Manager (view/manage running processes)
- âœ… Service Manager (systemd service control)
- âœ… Storage Manager (disk/mount management, renamed from Storage Viewer)
- âœ… User Manager (basic user listing, admin only)
- âœ… Terminal (web-based terminal access)

### What Needs to Be Built (Podman Focus)
- âœ… Pod management (first-class support - CRUD operations complete)
- âœ… Image management UI - COMPLETE
- âœ… Volume management UI - COMPLETE
- âœ… Podman-specific network management - COMPLETE
- ğŸ”¨ Translation engine (Docker Compose â†’ Podman/Quadlet/Kube)
- ğŸ”¨ Quadlet file generation
- ğŸ”¨ Multi-socket support (root/rootless context switching)
- ğŸ”¨ Enhanced container creation (pod integration)

---

## Core Feature Set (v1.0)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PODMANGR v1.0                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  CONTAINER MANAGEMENT                                           â”‚
â”‚  â”œâ”€ List, start, stop, restart, remove                     [âœ“]  â”‚
â”‚  â”œâ”€ Create with form builder OR raw CLI flags              [âœ“]  â”‚
â”‚  â”œâ”€ Live logs (WebSocket streaming)                        [âœ“]  â”‚
â”‚  â”œâ”€ Live stats (CPU, memory, network, historical charts)   [âœ“]  â”‚
â”‚  â”œâ”€ Exec into running containers (web terminal)            [âœ“]  â”‚
â”‚  â”œâ”€ Inspect (full JSON view)                               [âœ“]  â”‚
â”‚  â””â”€ Pod integration (create containers in pods)            [ ]  â”‚
â”‚                                                                 â”‚
â”‚  POD MANAGEMENT (First-Class)                                   â”‚
â”‚  â”œâ”€ List pods with container counts                        [âœ“]  â”‚
â”‚  â”œâ”€ Create pods (with port mappings)                       [âœ“]  â”‚
â”‚  â”œâ”€ Start/stop/restart/pause/unpause pods                  [âœ“]  â”‚
â”‚  â”œâ”€ Remove pods (with force option)                        [âœ“]  â”‚
â”‚  â”œâ”€ Pod inspection (JSON details)                          [âœ“]  â”‚
â”‚  â”œâ”€ Create containers within pods                          [ ]  â”‚
â”‚  â”œâ”€ Pod-level networking visualization                     [ ]  â”‚
â”‚  â””â”€ Convert standalone containers â†’ pod                    [ ]  â”‚
â”‚                                                                 â”‚
â”‚  IMAGE MANAGEMENT                                               â”‚
â”‚  â”œâ”€ List local images                                      [âœ“]  â”‚
â”‚  â”œâ”€ Pull from any registry (with auth)                     [âœ“]  â”‚
â”‚  â”œâ”€ Remove / prune                                         [âœ“]  â”‚
â”‚  â”œâ”€ Build from Containerfile (basic)                       [ ]  â”‚
â”‚  â””â”€ Registry alias configuration                           [ ]  â”‚
â”‚                                                                 â”‚
â”‚  VOLUME & NETWORK                                               â”‚
â”‚  â”œâ”€ List, create, remove volumes                           [âœ“]  â”‚
â”‚  â”œâ”€ List, create, remove networks (Podman-specific)        [âœ“]  â”‚
â”‚  â””â”€ Visual network topology (stretch goal)                 [ ]  â”‚
â”‚                                                                 â”‚
â”‚  TRANSLATION ENGINE                                             â”‚
â”‚  â”œâ”€ Docker Compose â†’ Podman Compose                        [ ]  â”‚
â”‚  â”œâ”€ Docker Compose â†’ Quadlet files                         [ ]  â”‚
â”‚  â”œâ”€ Docker Compose â†’ Kube YAML                             [ ]  â”‚
â”‚  â”œâ”€ Monaco editor with live diagnostics                    [ ]  â”‚
â”‚  â”œâ”€ Rule-based transformation engine                       [ ]  â”‚
â”‚  â””â”€ Side-by-side diff view                                 [ ]  â”‚
â”‚                                                                 â”‚
â”‚  QUADLET INTEGRATION                                            â”‚
â”‚  â”œâ”€ Generate .container files from running containers      [ ]  â”‚
â”‚  â”œâ”€ Generate .pod files                                    [ ]  â”‚
â”‚  â”œâ”€ Systemd status integration                             [ ]  â”‚
â”‚  â””â”€ One-click "make persistent" via Quadlet                [ ]  â”‚
â”‚                                                                 â”‚
â”‚  MULTI-SOCKET SUPPORT                                           â”‚
â”‚  â”œâ”€ Root socket (/run/podman/podman.sock)                  [~]  â”‚
â”‚  â”œâ”€ Rootless sockets (/run/user/UID/podman/podman.sock)    [ ]  â”‚
â”‚  â”œâ”€ Switch between contexts in UI                          [ ]  â”‚
â”‚  â””â”€ Visual indicator of current context                    [ ]  â”‚
â”‚                                                                 â”‚
â”‚  AUTHENTICATION                                                 â”‚
â”‚  â”œâ”€ Simple local auth (username/password)                  [âœ“]  â”‚
â”‚  â”œâ”€ PAM integration (optional)                             [âœ“]  â”‚
â”‚  â””â”€ JWT sessions                                           [âœ“]  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend: [âœ“] Done  [~] Partial  [ ] Not started
```

---

## Implementation Roadmap

### Phase 0: Stardeck Removal & Rebranding âœ… 100% COMPLETE

**Goal:** Strip out Stardeck-specific bloat, keep useful system tools, rebrand to Podmangr

**Approach:** Hybrid - Podman-first with system management essentials

**Status:** COMPLETE - Backend fully rebranded and building cleanly with embedded frontend.

**Summary:**
- Removed 7 handler files, 5 repo files, 5 model files, system database service
- Cleaned up 150+ lines from routes.go (removed all Stardeck-only endpoints)
- Stubbed audit system (no-op) to maintain backward compatibility
- Frontend: 12 Stardeck pages removed, 5 system pages restored, Podman pages built out
- Navigation structure redesigned: Podman-first with system tools in sidebar
- Project identity established: "Podman deserves better tooling"
- Full rebranding: module name, imports, certificate generation all updated to Podmangr

**Backend Cleanup:**
- [âœ“] Remove Alliance handlers (`internal/api/alliance_handlers.go`)
- [âœ“] Remove Realm handlers (`internal/api/realm_handlers.go`)
- [âœ“] Remove Audit handlers (`internal/api/audit_handlers.go`)
- [âœ“] Remove Group handlers (`internal/api/group_handlers.go`)
- [âœ“] Remove Package/RPM handlers (`internal/api/package_handlers.go`)
- [âœ“] Remove File handlers (`internal/api/file_handlers.go`)
- [âœ“] Remove Database handlers (`internal/api/database_handlers.go`)
- [âœ“] Remove Alliance/Audit/Group/Realm/Database repos and models
- [âœ“] Remove `/internal/alliance/` directory
- [âœ“] Remove `/internal/system/database_service.go`
- [âœ“] Keep System handlers (processes, services, storage) - USEFUL
- [âœ“] Keep User handlers - USEFUL (admin only)
- [âœ“] Stub out audit logging (system removed but compat maintained)
- [âœ“] Clean up routes (`internal/api/routes.go`)
- [âœ“] Create action constants file (`internal/models/actions.go`)
- [âœ“] Backend builds successfully with no errors
- [âœ“] Rename project references (stardeckos-backend â†’ podmangr-backend) - COMPLETE
- [âœ“] Update go.mod module name to podmangr-backend
- [âœ“] Update all internal imports across 18+ Go files
- [âœ“] Update certificate generation with Podmangr branding

**Frontend Cleanup:**
- [âœ“] Remove pages: `alliance/`, `realm-manager/`, `group-manager/`
- [âœ“] Remove pages: `audit-log/`, `rpm-manager/`, `file-browser/`
- [âœ“] Remove pages: `container-app/`, `dashboard/` (Stardeck-specific)
- [âœ“] Restore useful pages: `process-manager/`, `service-manager/`, `system-monitor/`
- [âœ“] Create `storage-manager/` (renamed from storage-viewer)
- [âœ“] Keep `user-manager/` (admin only)
- [âœ“] Create permanent sidebar (removed Start Menu concept)
- [âœ“] Create Podman pages: `pods/` (placeholder), `images/` (COMPLETE), `volumes/` (COMPLETE)
- [âœ“] Create `podman-networks/` page (COMPLETE - separate from Linux networking)
- [âœ“] Remove Stardeck branding (Starfleet references, sci-fi theme)
- [âœ“] Update navigation structure (Podman-first with system tools)
- [âœ“] Update package.json metadata
- [âœ“] Remove Web UI / Desktop App settings from container pages
- [âœ“] Remove adopt container functionality (all containers are managed)
- [âœ“] Rename localStorage keys (stardeck-* â†’ podmangr-*)
- [âœ“] Update theme storage key, settings storage key
- [ ] Simplify Settings page (remove Stardeck-specific preferences)
- [ ] Remove unused components (start-menu.tsx, etc.)

**Configuration & Branding:**
- [âœ“] Update `package.json` (name, description, repository)
- [âœ“] Update metadata in layout.tsx (title, description)
- [âœ“] Update login page branding
- [ ] Update environment variables and config files
- [ ] Create new logo/favicon (currently using lock icon)
- [ ] Write comprehensive README.md
- [ ] Add LICENSE file

**Testing:**
- [âœ“] Build frontend successfully (clean builds, zero ESLint warnings)
- [âœ“] Verify basic container operations work
- [âœ“] Test authentication flow
- [âœ“] Test WebSocket connections (logs, terminal)
- [âœ“] Test system management pages (processes, services, storage)
- [âœ“] Frontend successfully exported and embedded in backend
- [âœ“] Backend builds cleanly with embedded frontend

---

### Phase 1: Podman Core Enhancement âœ… COMPLETE (95%)

**Goal:** Improve existing container management and add missing Podman features

**Image Management:**
- [âœ“] Build image list UI (`/images` page)
- [âœ“] Add image pull dialog (with registry auth)
- [âœ“] Add image removal/prune functionality
- [âœ“] Show image metadata and size info
- [~] Add Containerfile build support (deferred - future enhancement)

**Volume Management:**
- [âœ“] Build volume list UI (`/volumes` page)
- [âœ“] Add volume creation dialog
- [âœ“] Add volume removal/prune
- [âœ“] Show volume metadata and driver info

**Network Management:**
- [âœ“] Refactor network manager to be Podman-specific
- [âœ“] List Podman networks (not Linux networks) - created `/podman-networks` page
- [âœ“] Add network creation dialog (bridge, macvlan, IPv6 support, internal networks)
- [âœ“] Show network metadata and connected containers
- [âœ“] Add network removal

**Container Enhancements:**
- [âœ“] Add full JSON inspect view (new Inspect tab in container details)
- [âœ“] Improve stats display (SVG-based historical charts, sparklines, trend indicators)
- [~] Add container rename (backend exists - UI deferred)
- [~] Add container export/import (deferred - future enhancement)
- [~] Add healthcheck management (deferred - future enhancement)

**Status:** Core Podman management features complete. Deferred items are refinements that can be added as future enhancements.

---

### Phase 2: Pod Management (First-Class) âœ… COMPLETE

**Goal:** Make pods a first-class citizen, not an afterthought

**Pod CRUD:** âœ… COMPLETE
- [âœ“] Build pod list UI (`/pods` page)
- [âœ“] Add pod creation wizard (with port mappings and labels)
- [âœ“] Add pod start/stop/restart/pause/unpause/remove
- [âœ“] Show pod status and container counts
- [âœ“] Add pod inspection (via inspect endpoint)
- [âœ“] Create dedicated pod details page (`/pod-details`)

**Pod-Container Integration:** âœ… COMPLETE (Basic)
- [âœ“] Show containers within pods (in pod details page)
- [âœ“] Navigate to container details from pod view
- [~] Allow creating containers within pods (deferred - future enhancement)
- [~] Show pod membership in container list (deferred - future enhancement)

**Pod Visualization:** âœ… COMPLETE (Basic)
- [âœ“] Display shared namespaces (network, IPC, UTS) in pod details
- [âœ“] Show port mappings at pod level
- [âœ“] Show labels and create command
- [~] Show pod-level networking diagram (deferred - future enhancement)
- [~] Display resource usage per pod (deferred - future enhancement)

**API Helpers:** âœ… COMPLETE
- [âœ“] Add pod API helpers to lib/api.ts
- [âœ“] Add containers/images/volumes/networks API helpers

---

### Phase 3: Multi-Socket Support âœ… COMPLETE

**Goal:** Support both root and rootless Podman contexts

**Backend:** âœ… COMPLETE
- [âœ“] Implement socket registry (`internal/system/sockets.go`)
- [âœ“] Auto-detect available sockets (root + all user UIDs)
- [âœ“] Add context switching API endpoint (`/api/podman-sockets`)
- [âœ“] Socket discovery and refresh functionality
- [âœ“] Handle permissions properly per context

**Frontend:** âœ… COMPLETE
- [âœ“] Add context switcher component (`components/context-switcher.tsx`)
- [âœ“] Show current context (root vs rootless, UID)
- [âœ“] Add visual indicator (color coding: red=root, green=rootless)
- [âœ“] Context switcher in sidebar below user info
- [âœ“] Show socket availability status

---

### Phase 4: Translation Engine âœ… COMPLETE

**Goal:** Help users migrate from Docker Compose to Podman

**Backend Parser:** âœ… COMPLETE
- [âœ“] Implement Docker Compose parser (`internal/translator/compose.go`)
- [âœ“] Build rule-based transformation engine
- [âœ“] Create transformation rules:
  - [âœ“] Socket paths (`/var/run/docker.sock` â†’ `/run/podman/podman.sock`)
  - [âœ“] Registry shortcuts (`postgres:15` â†’ `docker.io/library/postgres:15`)
  - [âœ“] SELinux volume flags (`:z`, `:Z`)
  - [âœ“] Restart policies (align with systemd)
  - [âœ“] Network modes (with warnings for host mode)

**Output Generators:** âœ… COMPLETE
- [âœ“] Podman Compose output (YAML)
- [âœ“] Quadlet output (.container files)
- [âœ“] Kubernetes YAML output (Pod manifest)

**Frontend:** âœ… COMPLETE
- [âœ“] Build translation editor page (`/translate`)
- [âœ“] Side-by-side input/output panels
- [âœ“] Output format selector (Podman Compose, Quadlet, Kube)
- [âœ“] Live transformation changes display
- [âœ“] Warnings and errors display
- [âœ“] Copy to clipboard functionality
- [âœ“] Download output as file

---

### Phase 5: Quadlet Integration

**Goal:** Make systemd-managed containers easy

**Generation:**
- [ ] Generate `.container` files from running containers
- [ ] Generate `.pod` files from running pods
- [ ] Generate `.volume` files
- [ ] Generate `.network` files
- [ ] Handle dependencies and ordering

**Systemd Integration:**
- [ ] Show systemd unit status
- [ ] Enable/disable units
- [ ] Start/stop via systemd
- [ ] View systemd logs
- [ ] Handle user vs system units

**UI:**
- [ ] Add "Make Persistent" button on container details
- [ ] Show generated Quadlet preview before saving
- [ ] Allow editing before saving
- [ ] Save to `/etc/containers/systemd/` or `~/.config/containers/systemd/`

---

### Phase 6: Polish & Production

**Goal:** Make it production-ready

**Documentation:**
- [ ] Write comprehensive README
- [ ] Document API endpoints
- [ ] Write translation rules guide
- [ ] Create deployment guide
- [ ] Add screenshots/demo

**Deployment:**
- [ ] Create Containerfile
- [ ] Create Quadlet file (eat our own dogfood!)
- [âœ“] Add Makefile for builds - COMPLETE
- [âœ“] Install scripts (scripts/install.sh) - COMPLETE
- [âœ“] Service files (scripts/podmangr.service) - COMPLETE
- [ ] Set up CI/CD
- [ ] Create release binaries

**Features:**
- [ ] Add settings page (minimal - socket paths, theme, etc.)
- [ ] Add keyboard shortcuts
- [ ] Add search/filter everywhere
- [ ] Improve error handling and user feedback
- [ ] Add loading states and optimistic updates

**Testing:**
- [âœ“] Write unit tests (critical paths) - JEST + GO TESTS COMPLETE
- [âœ“] Frontend Jest tests (86 tests passing)
- [âœ“] Backend Go tests (auth, models, system, API)
- [ ] Test on RHEL/Rocky/Fedora
- [ ] Test rootless vs root scenarios
- [ ] Test with real workloads
- [ ] Performance testing

---

## Project Structure (Current vs Target)

### Current Structure (Phase 0 Complete)
```
podmangr/
â”œâ”€â”€ podmangr-backend/      # Go backend (cleanup pending)
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ alliance_handlers.go    # TO REMOVE
â”‚   â”‚   â”‚   â”œâ”€â”€ realm_handlers.go       # TO REMOVE
â”‚   â”‚   â”‚   â”œâ”€â”€ audit_handlers.go       # TO REMOVE
â”‚   â”‚   â”‚   â”œâ”€â”€ group_handlers.go       # TO REMOVE
â”‚   â”‚   â”‚   â”œâ”€â”€ package_handlers.go     # TO REMOVE
â”‚   â”‚   â”‚   â”œâ”€â”€ file_handlers.go        # TO REMOVE
â”‚   â”‚   â”‚   â”œâ”€â”€ database_handlers.go    # TO REMOVE
â”‚   â”‚   â”‚   â”œâ”€â”€ container_handlers.go   # KEEP
â”‚   â”‚   â”‚   â”œâ”€â”€ system_handlers.go      # KEEP
â”‚   â”‚   â”‚   â”œâ”€â”€ user_handlers.go        # KEEP
â”‚   â”‚   â”‚   â””â”€â”€ routes.go               # CLEANUP
â”‚   â”‚   â”œâ”€â”€ alliance/      # TO REMOVE
â”‚   â”‚   â”œâ”€â”€ auth/          # KEEP (simplify)
â”‚   â”‚   â””â”€â”€ system/        # KEEP
â”‚   â””â”€â”€ main.go
â”‚
â””â”€â”€ podmangr-frontend/     # âœ… Frontend complete!
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ page.tsx               # âœ… Redirects to container-manager
    â”‚   â”œâ”€â”€ login/                 # âœ… Rebranded
    â”‚   â”œâ”€â”€ container-manager/     # âœ… KEPT
    â”‚   â”œâ”€â”€ container-details/     # âœ… KEPT
    â”‚   â”œâ”€â”€ container-create/      # âœ… KEPT
    â”‚   â”œâ”€â”€ pods/                  # âœ… NEW (placeholder)
    â”‚   â”œâ”€â”€ images/                # âœ… NEW (placeholder)
    â”‚   â”œâ”€â”€ volumes/               # âœ… NEW (placeholder)
    â”‚   â”œâ”€â”€ network-manager/       # âœ… KEPT (to refactor)
    â”‚   â”œâ”€â”€ system-monitor/        # âœ… RESTORED
    â”‚   â”œâ”€â”€ process-manager/       # âœ… RESTORED
    â”‚   â”œâ”€â”€ service-manager/       # âœ… RESTORED
    â”‚   â”œâ”€â”€ storage-manager/       # âœ… RESTORED (renamed)
    â”‚   â”œâ”€â”€ user-manager/          # âœ… RESTORED (admin only)
    â”‚   â”œâ”€â”€ terminal/              # âœ… KEPT
    â”‚   â””â”€â”€ settings/              # âœ… KEPT (to simplify)
    â”œâ”€â”€ components/
    â”‚   â”œâ”€â”€ sidebar.tsx            # âœ… NEW (permanent sidebar)
    â”‚   â”œâ”€â”€ dashboard-layout.tsx   # âœ… UPDATED (no Start Menu)
    â”‚   â””â”€â”€ start-menu.tsx         # âš ï¸ TO REMOVE (unused)
    â””â”€â”€ package.json               # âœ… UPDATED (Podmangr branding)
```

### Target Structure (v1.0)
```
podmangr/
â”œâ”€â”€ backend/                      # Go backend
â”‚   â”œâ”€â”€ cmd/podmangr/
â”‚   â”‚   â””â”€â”€ main.go
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ routes.go
â”‚   â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth.go
â”‚   â”‚   â”‚   â””â”€â”€ handlers/
â”‚   â”‚   â”‚       â”œâ”€â”€ container_handlers.go
â”‚   â”‚   â”‚       â”œâ”€â”€ pod_handlers.go
â”‚   â”‚   â”‚       â”œâ”€â”€ image_handlers.go
â”‚   â”‚   â”‚       â”œâ”€â”€ volume_handlers.go
â”‚   â”‚   â”‚       â”œâ”€â”€ network_handlers.go
â”‚   â”‚   â”‚       â”œâ”€â”€ system_handlers.go      # System mgmt (kept)
â”‚   â”‚   â”‚       â”œâ”€â”€ user_handlers.go        # User mgmt (kept)
â”‚   â”‚   â”‚       â”œâ”€â”€ translate_handlers.go   # Future
â”‚   â”‚   â”‚       â”œâ”€â”€ quadlet_handlers.go     # Future
â”‚   â”‚   â”‚       â””â”€â”€ auth_handlers.go
â”‚   â”‚   â”œâ”€â”€ podman/
â”‚   â”‚   â”‚   â”œâ”€â”€ client.go
â”‚   â”‚   â”‚   â”œâ”€â”€ containers.go
â”‚   â”‚   â”‚   â”œâ”€â”€ pods.go
â”‚   â”‚   â”‚   â”œâ”€â”€ images.go
â”‚   â”‚   â”‚   â”œâ”€â”€ volumes.go
â”‚   â”‚   â”‚   â”œâ”€â”€ networks.go
â”‚   â”‚   â”‚   â””â”€â”€ multi_socket.go             # Future
â”‚   â”‚   â”œâ”€â”€ system/                         # System tools (kept)
â”‚   â”‚   â”‚   â”œâ”€â”€ processes.go
â”‚   â”‚   â”‚   â”œâ”€â”€ services.go
â”‚   â”‚   â”‚   â””â”€â”€ storage.go
â”‚   â”‚   â”œâ”€â”€ translator/                     # Future
â”‚   â”‚   â”‚   â”œâ”€â”€ engine.go
â”‚   â”‚   â”‚   â”œâ”€â”€ rules/
â”‚   â”‚   â”‚   â”œâ”€â”€ output/
â”‚   â”‚   â”‚   â””â”€â”€ parser/
â”‚   â”‚   â”œâ”€â”€ quadlet/                        # Future
â”‚   â”‚   â”‚   â”œâ”€â”€ generator.go
â”‚   â”‚   â”‚   â””â”€â”€ templates.go
â”‚   â”‚   â””â”€â”€ auth/
â”‚   â”‚       â””â”€â”€ jwt.go
â”‚   â”œâ”€â”€ go.mod
â”‚   â””â”€â”€ go.sum
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.tsx                 # Redirects to containers
â”‚   â”‚   â”œâ”€â”€ login/                   # Auth
â”‚   â”‚   â”œâ”€â”€ container-manager/       # Podman: Containers
â”‚   â”‚   â”œâ”€â”€ container-details/       # Podman: Container details
â”‚   â”‚   â”œâ”€â”€ container-create/        # Podman: Create container
â”‚   â”‚   â”œâ”€â”€ pods/                    # Podman: Pod management
â”‚   â”‚   â”œâ”€â”€ images/                  # Podman: Image management
â”‚   â”‚   â”œâ”€â”€ volumes/                 # Podman: Volume management
â”‚   â”‚   â”œâ”€â”€ network-manager/         # Podman: Network management
â”‚   â”‚   â”œâ”€â”€ system-monitor/          # System: Resource monitoring
â”‚   â”‚   â”œâ”€â”€ process-manager/         # System: Process management
â”‚   â”‚   â”œâ”€â”€ service-manager/         # System: Systemd services
â”‚   â”‚   â”œâ”€â”€ storage-manager/         # System: Disk/mount management
â”‚   â”‚   â”œâ”€â”€ user-manager/            # System: User management
â”‚   â”‚   â”œâ”€â”€ terminal/                # System: Web terminal
â”‚   â”‚   â”œâ”€â”€ translate/               # Future: Compose translator
â”‚   â”‚   â””â”€â”€ settings/                # Settings
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ sidebar.tsx              # Permanent navigation
â”‚   â”‚   â”œâ”€â”€ dashboard-layout.tsx     # Main layout
â”‚   â”‚   â”œâ”€â”€ ui/                      # shadcn components
â”‚   â”‚   â”œâ”€â”€ containers/              # Container components
â”‚   â”‚   â”œâ”€â”€ pods/                    # Future: Pod components
â”‚   â”‚   â”œâ”€â”€ editor/                  # Future: Monaco editor
â”‚   â”‚   â””â”€â”€ terminal/                # xterm.js terminal
â”‚   â”œâ”€â”€ lib/
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ deploy/
â”‚   â”œâ”€â”€ podmangr.container           # Quadlet file (future)
â”‚   â””â”€â”€ Containerfile                # Docker/Podman build
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ TRANSLATION_RULES.md         # Future
â”‚   â””â”€â”€ API.md
â”‚
â””â”€â”€ Makefile
```

---

## Key Technical Decisions

| Decision | Choice | Status |
|----------|--------|--------|
| **Podman bindings** | `containers/podman/v5` | âœ“ Already using |
| **HTTP router** | Echo framework | âœ“ Already using |
| **Frontend** | Next.js 14 (static export) | âœ“ Already using |
| **Frontend state** | React hooks + fetch | âœ“ Current approach |
| **UI components** | shadcn/ui + Tailwind | âœ“ Already using |
| **Terminal** | xterm.js | âœ“ Already using |
| **Auth** | JWT (simplified) | ~ Needs simplification |
| **Database** | SQLite | âœ“ Already using |
| **Editor** | Monaco | To be added |
| **YAML parsing** | `gopkg.in/yaml.v3` | To be added |

---

## Success Metrics (v1.0)

- [ ] All Stardeck features removed (clean Podman focus)
- [ ] Can manage containers, pods, images, volumes, networks
- [ ] Can translate Docker Compose to Podman formats
- [ ] Can generate Quadlet files from running containers
- [ ] Supports both root and rootless contexts
- [ ] Deployable via Quadlet (self-hosting)
- [ ] Clear documentation and examples

---

## Current Status

**Phase 0: 100% Complete** âœ…
- Frontend refactored, rebranded, and restructured
- Backend fully cleaned and rebranded (Stardeck â†’ Podmangr)
- All imports updated to podmangr-backend
- Certificate generation rebranded
- Clean builds with embedded frontend

**Phase 1: COMPLETE (95%)** âœ…
- Image management UI complete (list, pull, remove)
- Volume management UI complete (list, create, remove)
- Network management UI complete (Podman-specific, create, remove, inspect)
- Container inspect view (full JSON)
- Enhanced stats display (SVG-based historical charts, sparklines)
- Frontend null safety improvements (system monitor, process manager)
- Deferred items noted for future enhancement

**Phase 2: COMPLETE** âœ…
- Pod management backend functions (ListPods, CreatePod, StartPod, StopPod, RestartPod, RemovePod, InspectPod, PausePod, UnpausePod)
- Pod API handlers with proper authentication and error handling
- Pod routes registered (`/api/pods`)
- Complete `/pods` page with search, filtering, and auto-refresh
- Pod creation dialog with port mappings and labels support
- Pod lifecycle actions (start, stop, restart, pause, unpause, remove)
- Pod status visualization (running, paused, stopped)
- Container count display per pod
- **NEW:** Dedicated `/pod-details` page with:
  - Pod overview (ID, name, status, created, container count)
  - Shared namespaces display (network, IPC, UTS)
  - Port mappings visualization
  - Labels display
  - Create command with copy functionality
  - Containers tab showing all containers in the pod
  - Navigation to individual container details
  - Full JSON inspect view with copy-to-clipboard
- **NEW:** Enhanced pod creation with labels UI
- **NEW:** API helpers in lib/api.ts for pods, containers, images, volumes, networks

**Phase 3: COMPLETE** âœ…
- Multi-socket support with context switching
- Socket discovery for root and rootless sockets
- Context switcher UI in sidebar

**Phase 4: COMPLETE** âœ…
- Docker Compose to Podman translator
- Support for Podman Compose, Quadlet, and Kube outputs
- Transformation rules for common Docker â†’ Podman conversions
- Full translation UI with side-by-side editor

**Phase 5: NOT STARTED**
- Quadlet integration (generate from running containers)

**Next Steps:**
1. Add Quadlet integration (Phase 5) - generate from running containers
2. Polish and production readiness (Phase 6)

**Recent Accomplishments:**

**Testing Infrastructure (Latest):**
- Frontend Jest testing configured and working
  - Installed: jest, @testing-library/react, @testing-library/jest-dom, jest-environment-jsdom
  - Created jest.config.js with Next.js integration
  - Created jest.setup.js with mocks for next/navigation, localStorage, fetch
  - 86 tests passing across 4 test files:
    - `__tests__/lib/api.test.ts` - Container, Pod, Image, Volume, Network, Auth, System APIs
    - `__tests__/lib/auth-context.test.tsx` - Auth context state management
    - `__tests__/lib/utils.test.ts` - Utility functions (cn, formatBytes, getStatusColor, etc.)
    - `__tests__/components/button.test.tsx` - Button component variants and props
- Backend Go tests complete
  - `internal/api/handlers_test.go` - Health check and audit service tests
  - `internal/auth/password_test.go` - Password hashing (Argon2) and verification
  - `internal/models/container_test.go` - Model constants and struct tests
  - `internal/system/files_test.go` - File operations (list, create, delete, copy, read, write)
  - All 38 Go tests passing

**Full Stardeck â†’ Podmangr Rebranding:**
- Removed ALL Stardeck references from codebase
- Updated environment variables: STARDECK_* â†’ PODMANGR_*
- Updated container labels: stardeck.* â†’ podmangr.*
- Updated localStorage keys: stardeck-* â†’ podmangr-*
- Updated backup paths: ~/.stardeck â†’ ~/.podmangr
- Updated volume paths: /var/lib/stardeck â†’ /var/lib/podmangr
- Deleted unused start-menu.tsx component
- Updated auth realm from "Stardeck OS" to "Podmangr"

**Deployment Infrastructure:**
- Rewrote Makefile with podmangr targets
- Created scripts/install.sh for installation
- Created scripts/podmangr.service for systemd
- Updated podmangr-backend/deploy/ files

**Stardeck Cleanup (Previous):**
- Removed "Has Web UI" / Desktop App settings from container-create page
- Removed adopt container dialog and functionality from container-manager
- Removed Web UI settings from container-details page
- Cleaned up Container interface types (removed has_web_ui, web_ui_port, web_ui_path, icon)
- Renamed localStorage keys from `stardeck-*` to `podmangr-*`:
  - `podmangr-token`, `podmangr-user` (auth)
  - `podmangr-ui-theme` (theme)
  - `podmangr-settings`, `podmangr-custom-themes` (settings)
- Updated mock data hostnames from `.stardeck.local` to `.podmangr.local`
- Fixed CSS comments and settings page branding
- Stack deployment improvements:
  - Updated stack directory from `/var/lib/stardeck/stacks` to `/var/lib/podmangr/stacks`
  - Added compose file validation before deployment
  - Enhanced container detection with name prefix fallback
  - Improved deploy dialog with success/failure state tracking

**Phase 4 - Translation Engine:**
- Created translation package (`internal/translator/compose.go`)
- Docker Compose YAML parser with full service/network/volume support
- Transformation rules: docker socket, registry prefix, SELinux labels, restart policy, network mode
- Three output formats: Podman Compose YAML, Quadlet .container files, Kubernetes Pod YAML
- API endpoints: POST /api/translate, POST /api/translate/validate, GET /api/translate/rules
- Translation UI page (`/translate`) with:
  - Side-by-side input/output editor panels
  - Format selector dropdown
  - Changes tab showing all transformations applied
  - Warnings tab for potential issues
  - Copy and download functionality

**Phase 3 - Multi-Socket Support:**
- Socket registry (`internal/system/sockets.go`) for managing multiple Podman contexts
- Auto-detection of available sockets (root at /run/podman/podman.sock, rootless at /run/user/*/podman/)
- API handlers for socket listing, switching, and refresh
- Context switcher component in sidebar with color-coded indicators
- Seamless context switching between root and rootless Podman

**Phase 2 - Pod Management:**
- Pod details page with overview, containers, and inspect tabs
- Enhanced pod creation with labels support
- API helpers for all Podman resources

**Earlier Phases:**
- Created `/images`, `/volumes`, `/podman-networks` pages
- Container inspect view and enhanced stats charts
- Clean builds with 26 frontend pages

**Approach:**
Podmangr is a **hybrid tool** - Podman-first with essential Linux system management. Not bloated, just practical for homelab users who need both container management and system monitoring in one place.

Podman deserves better tooling. We're building it. ğŸš€
